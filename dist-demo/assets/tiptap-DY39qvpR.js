import{f as Ns,c as On,N as ne,T as Is,E as Ps,a as Hs,P as X,b as Z,S as Nt,k as _s,d as tt,D as $s,e as Br,F as At,g as Dr,h as sn,w as Bs,i as Ds,j as js,l as he,s as Fs,m as rr,n as zs,o as Us,p as Ws,q as Ks,r as Gs,A as qs,t as Vs,u as Js,v as Qs,x as Xs,y as Ys,z as Zs,B as to,C as jr,G as eo,H as no,I as ro,J as so,K as oo,L as io,M as ao,R as lo,O as co,Q as uo,U as po,V as fo,W as ho,X as mo,Y as go,Z as bo,_ as Fr,$ as yo,a0 as sr,a1 as ko,a2 as or,a3 as ir,a4 as Eo,a5 as ar,a6 as Mo,a7 as vo,a8 as To,a9 as wo,aa as Ao,ab as So,ac as xo,ad as Rn,ae as Nn}from"./prosemirror-CATLC7B1.js";function Ge(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:s}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,o=n.storedMarks,n}}}class qe{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:s}=n,{tr:o}=r,i=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(i);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:s,state:o}=this,{view:i}=s,a=[],l=!!e,c=e||o.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(c),a.every(p=>p===!0)),d={...Object.fromEntries(Object.entries(r).map(([p,f])=>[p,(...g)=>{const h=this.buildProps(c,n),m=f(...g)(h);return a.push(m),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,s=!1,o=e||r.tr,i=this.buildProps(o,s);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...i,dispatch:void 0})])),chain:()=>this.createChain(o,s)}}buildProps(e,n=!0){const{rawCommands:r,editor:s,state:o}=this,{view:i}=s,a={tr:e,editor:s,view:i,state:Ge({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class Co{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(s=>s.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(s=>s!==n):delete this.callbacks[e]),this}once(e,n){const r=(...s)=>{this.off(e,r),n.apply(this,s)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function M(t,e,n){return t.config[e]===void 0&&t.parent?M(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?M(t.parent,e,n):null}):t.config[e]}function Ve(t){const e=t.filter(s=>s.type==="extension"),n=t.filter(s=>s.type==="node"),r=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function zr(t){const e=[],{nodeExtensions:n,markExtensions:r}=Ve(t),s=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage,extensions:s},l=M(i,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([p,f])=>{e.push({type:d,name:p,attribute:{...o,...f}})})})})}),s.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=M(i,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const p={...o,...d};typeof p?.default=="function"&&(p.default=p.default()),p?.isRequired&&p?.default===void 0&&delete p.default,e.push({type:i.name,name:u,attribute:p})})}),e}function q(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function I(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([s,o])=>{if(!r[s]){r[s]=o;return}if(s==="class"){const a=o?String(o).split(" "):[],l=r[s]?r[s].split(" "):[],c=a.filter(u=>!l.includes(u));r[s]=[...l,...c].join(" ")}else if(s==="style"){const a=o?o.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[s]?r[s].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,p]=u.split(":").map(f=>f.trim());c.set(d,p)}),a.forEach(u=>{const[d,p]=u.split(":").map(f=>f.trim());c.set(d,p)}),r[s]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[s]=o}),r},{})}function gn(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>I(n,r),{})}function Ur(t){return typeof t=="function"}function R(t,e=void 0,...n){return Ur(t)?e?t.bind(e)(...n):t(...n):t}function Lo(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Oo(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function lr(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const s=e.reduce((o,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(n):Oo(n.getAttribute(i.name));return a==null?o:{...o,[i.name]:a}},{});return{...r,...s}}}}function cr(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Lo(n)?!1:n!=null))}function Ro(t,e){var n;const r=zr(t),{nodeExtensions:s,markExtensions:o}=Ve(t),i=(n=s.find(c=>M(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(s.map(c=>{const u=r.filter(m=>m.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},p=t.reduce((m,v)=>{const A=M(v,"extendNodeSchema",d);return{...m,...A?A(c):{}}},{}),f=cr({...p,content:R(M(c,"content",d)),marks:R(M(c,"marks",d)),group:R(M(c,"group",d)),inline:R(M(c,"inline",d)),atom:R(M(c,"atom",d)),selectable:R(M(c,"selectable",d)),draggable:R(M(c,"draggable",d)),code:R(M(c,"code",d)),whitespace:R(M(c,"whitespace",d)),linebreakReplacement:R(M(c,"linebreakReplacement",d)),defining:R(M(c,"defining",d)),isolating:R(M(c,"isolating",d)),attrs:Object.fromEntries(u.map(m=>{var v;return[m.name,{default:(v=m?.attribute)===null||v===void 0?void 0:v.default}]}))}),b=R(M(c,"parseHTML",d));b&&(f.parseDOM=b.map(m=>lr(m,u)));const g=M(c,"renderHTML",d);g&&(f.toDOM=m=>g({node:m,HTMLAttributes:gn(m,u)}));const h=M(c,"renderText",d);return h&&(f.toText=h),[c.name,f]})),l=Object.fromEntries(o.map(c=>{const u=r.filter(h=>h.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},p=t.reduce((h,m)=>{const v=M(m,"extendMarkSchema",d);return{...h,...v?v(c):{}}},{}),f=cr({...p,inclusive:R(M(c,"inclusive",d)),excludes:R(M(c,"excludes",d)),group:R(M(c,"group",d)),spanning:R(M(c,"spanning",d)),code:R(M(c,"code",d)),attrs:Object.fromEntries(u.map(h=>{var m;return[h.name,{default:(m=h?.attribute)===null||m===void 0?void 0:m.default}]}))}),b=R(M(c,"parseHTML",d));b&&(f.parseDOM=b.map(h=>lr(h,u)));const g=M(c,"renderHTML",d);return g&&(f.toDOM=h=>g({mark:h,HTMLAttributes:gn(h,u)})),[c.name,f]}));return new Br({topNode:i,nodes:a,marks:l})}function on(t,e){return e.nodes[t]||e.marks[t]||null}function ur(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function In(t,e){const n=$s.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}const No=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(s,o,i,a)=>{var l,c;const u=((c=(l=s.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:s,pos:o,parent:i,index:a}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?u:u.slice(0,Math.max(0,r-o))}),n};function Pn(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Je{constructor(e){this.find=e.find,this.handler=e.handler}}const Io=(t,e)=>{if(Pn(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith),r.push(n.replaceWith)),r};function oe(t){var e;const{editor:n,from:r,to:s,text:o,rules:i,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(p=>p.type.spec.code))return!1;let u=!1;const d=No(c)+o;return i.forEach(p=>{if(u)return;const f=Io(d,p.find);if(!f)return;const b=l.state.tr,g=Ge({state:l.state,transaction:b}),h={from:r-(f[0].length-o.length),to:s},{commands:m,chain:v,can:A}=new qe({editor:n,state:g});p.handler({state:g,range:h,match:f,commands:m,chain:v,can:A})===null||!b.steps.length||(b.setMeta(a,{transform:b,from:r,to:s,text:o}),l.dispatch(b),u=!0)}),u}function Po(t){const{editor:e,rules:n}=t,r=new X({state:{init(){return null},apply(s,o,i){const a=s.getMeta(r);if(a)return a;const l=s.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=In(At.from(u),i.schema);const{from:d}=l,p=d+u.length;oe({editor:e,from:d,to:p,text:u,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:o}},props:{handleTextInput(s,o,i,a){return oe({editor:e,from:o,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:o}=s.state.selection;o&&oe({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,o){if(o.key!=="Enter")return!1;const{$cursor:i}=s.state.selection;return i?oe({editor:e,from:i.pos,to:i.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function Ho(t){return Object.prototype.toString.call(t).slice(8,-1)}function ie(t){return Ho(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Qe(t,e){const n={...t};return ie(t)&&ie(e)&&Object.keys(e).forEach(r=>{ie(e[r])&&ie(t[r])?n[r]=Qe(t[r],e[r]):n[r]=e[r]}),n}class st{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0,this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=R(M(this,"addOptions",{name:this.name}))),this.storage=R(M(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new st(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Qe(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new st(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0,n.options=R(M(n,"addOptions",{name:n.name})),n.storage=R(M(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const i=s.marks();if(!!!i.find(c=>c?.type.name===n.name))return!1;const l=i.find(c=>c?.type.name===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}}function _o(t){return typeof t=="number"}class $o{constructor(e){this.find=e.find,this.handler=e.handler}}const Bo=(t,e,n)=>{if(Pn(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(s=>{const o=[s.text];return o.index=s.index,o.input=t,o.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith),o.push(s.replaceWith)),o}):[]};function Do(t){const{editor:e,state:n,from:r,to:s,rule:o,pasteEvent:i,dropEvent:a}=t,{commands:l,chain:c,can:u}=new qe({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,s,(f,b)=>{if(!f.isTextblock||f.type.spec.code)return;const g=Math.max(r,b),h=Math.min(s,b+f.content.size),m=f.textBetween(g-b,h-b,void 0,"ï¿¼");Bo(m,o.find,i).forEach(A=>{if(A.index===void 0)return;const x=g+A.index+1,S=x+A[0].length,P={from:n.tr.mapping.map(x),to:n.tr.mapping.map(S)},$=o.handler({state:n,range:P,match:A,commands:l,chain:c,can:u,pasteEvent:i,dropEvent:a});d.push($)})}),d.every(f=>f!==null)}let ae=null;const jo=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function Fo(t){const{editor:e,rules:n}=t;let r=null,s=!1,o=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:p,rule:f,pasteEvt:b})=>{const g=u.tr,h=Ge({state:u,transaction:g});if(!(!Do({editor:e,state:h,from:Math.max(d-1,0),to:p.b-1,rule:f,pasteEvent:b,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(u=>new X({view(d){const p=b=>{var g;r=!((g=d.dom.parentElement)===null||g===void 0)&&g.contains(b.target)?d.dom.parentElement:null,r&&(ae=e)},f=()=>{ae&&(ae=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",f),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",f)}}},props:{handleDOMEvents:{drop:(d,p)=>{if(o=r===d.dom.parentElement,a=p,!o){const f=ae;f?.isEditable&&setTimeout(()=>{const b=f.state.selection;b&&f.commands.deleteRange({from:b.from,to:b.to})},10)}return!1},paste:(d,p)=>{var f;const b=(f=p.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return i=p,s=!!b?.includes("data-pm-slice"),!1}}},appendTransaction:(d,p,f)=>{const b=d[0],g=b.getMeta("uiEvent")==="paste"&&!s,h=b.getMeta("uiEvent")==="drop"&&!o,m=b.getMeta("applyPasteRules"),v=!!m;if(!g&&!h&&!v)return;if(v){let{text:S}=m;typeof S=="string"?S=S:S=In(At.from(S),f.schema);const{from:P}=m,$=P+S.length,z=jo(S);return l({rule:u,state:f,from:P,to:{b:$},pasteEvt:z})}const A=p.doc.content.findDiffStart(f.doc.content),x=p.doc.content.findDiffEnd(f.doc.content);if(!(!_o(A)||!x||A===x.b))return l({rule:u,state:f,from:A,to:x,pasteEvt:i})}}))}function zo(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Dt{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Dt.resolve(e),this.schema=Ro(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Dt.sort(Dt.flatten(e));return zo(n.map(s=>s.name)).length,n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},s=M(n,"addExtensions",r);return s?[n,...this.flatten(s())]:n}).flat(10)}static sort(e){return e.sort((r,s)=>{const o=M(r,"priority")||100,i=M(s,"priority")||100;return o>i?-1:o<i?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:on(n.name,this.schema)},s=M(n,"addCommands",r);return s?{...e,...s()}:e},{})}get plugins(){const{editor:e}=this,n=Dt.sort([...this.extensions].reverse()),r=[],s=[],o=n.map(i=>{const a={name:i.name,options:i.options,storage:i.storage,editor:e,type:on(i.name,this.schema)},l=[],c=M(i,"addKeyboardShortcuts",a);let u={};if(i.type==="mark"&&M(i,"exitable",a)&&(u.ArrowRight=()=>st.handleExit({editor:e,mark:i})),c){const g=Object.fromEntries(Object.entries(c()).map(([h,m])=>[h,()=>m({editor:e})]));u={...u,...g}}const d=_s(u);l.push(d);const p=M(i,"addInputRules",a);ur(i,e.options.enableInputRules)&&p&&r.push(...p());const f=M(i,"addPasteRules",a);ur(i,e.options.enablePasteRules)&&f&&s.push(...f());const b=M(i,"addProseMirrorPlugins",a);if(b){const g=b();l.push(...g)}return l}).flat();return[Po({editor:e,rules:r}),...Fo({editor:e,rules:s}),...o]}get attributes(){return zr(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Ve(this.extensions);return Object.fromEntries(n.filter(r=>!!M(r,"addNodeView")).map(r=>{const s=this.attributes.filter(l=>l.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:q(r.name,this.schema)},i=M(r,"addNodeView",o);if(!i)return[];const a=(l,c,u,d,p)=>{const f=gn(l,s);return i()({node:l,view:c,getPos:u,decorations:d,innerDecorations:p,editor:e,extension:r,HTMLAttributes:f})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:on(e.name,this.schema)};e.type==="mark"&&(!((n=R(M(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const s=M(e,"onBeforeCreate",r),o=M(e,"onCreate",r),i=M(e,"onUpdate",r),a=M(e,"onSelectionUpdate",r),l=M(e,"onTransaction",r),c=M(e,"onFocus",r),u=M(e,"onBlur",r),d=M(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),o&&this.editor.on("create",o),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class G{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0,this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=R(M(this,"addOptions",{name:this.name}))),this.storage=R(M(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new G(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Qe(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new G({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0,n.options=R(M(n,"addOptions",{name:n.name})),n.storage=R(M(n,"addStorage",{name:n.name,options:n.options})),n}}function Wr(t,e,n){const{from:r,to:s}=e,{blockSeparator:o=`

`,textSerializers:i={}}=n||{};let a="";return t.nodesBetween(r,s,(l,c,u,d)=>{var p;l.isBlock&&c>r&&(a+=o);const f=i?.[l.type.name];if(f)return u&&(a+=f({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(p=l?.text)===null||p===void 0?void 0:p.slice(Math.max(r,c)-c,s-c))}),a}function Kr(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const Uo=G.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new X({key:new Z("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:s}=e,{ranges:o}=s,i=Math.min(...o.map(u=>u.$from.pos)),a=Math.max(...o.map(u=>u.$to.pos)),l=Kr(n);return Wr(r,{from:i,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),Wo=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),Ko=(t=!1)=>({commands:e})=>e.setContent("",t),Go=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:s}=r;return n&&s.forEach(({$from:o,$to:i})=>{t.doc.nodesBetween(o.pos,i.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),p=c.resolve(u.map(l+a.nodeSize)),f=d.blockRange(p);if(!f)return;const b=ao(f);if(a.type.isTextblock){const{defaultType:g}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(f.start,g)}(b||b===0)&&e.lift(f,b)})}),!0},qo=t=>e=>t(e),Vo=()=>({state:t,dispatch:e})=>io(t,e),Jo=(t,e)=>({editor:n,tr:r})=>{const{state:s}=n,o=s.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const i=r.mapping.map(e);return r.insert(i,o.content),r.setSelection(new tt(r.doc.resolve(Math.max(i-1,0)))),!0},Qo=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r.type){if(e){const a=s.before(o),l=s.after(o);t.delete(a,l).scrollIntoView()}return!0}return!1},Xo=t=>({tr:e,state:n,dispatch:r})=>{const s=q(t,n.schema),o=e.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===s){if(r){const l=o.before(i),c=o.after(i);e.delete(l,c).scrollIntoView()}return!0}return!1},Yo=t=>({tr:e,dispatch:n})=>{const{from:r,to:s}=t;return n&&e.delete(r,s),!0},Zo=()=>({state:t,dispatch:e})=>oo(t,e),ti=()=>({commands:t})=>t.keyboardShortcut("Enter"),ei=()=>({state:t,dispatch:e})=>so(t,e);function be(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>n.strict?e[s]===t[s]:Pn(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function Gr(t,e,n={}){return t.find(r=>r.type===e&&be(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function dr(t,e,n={}){return!!Gr(t,e,n)}function Hn(t,e,n){var r;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(u=>u.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(u=>u.type===e)||(n=n||((r=s.node.marks[0])===null||r===void 0?void 0:r.attrs),!Gr([...s.node.marks],e,n)))return;let i=s.index,a=t.start()+s.offset,l=i+1,c=a+s.node.nodeSize;for(;i>0&&dr([...t.parent.child(i-1).marks],e,n);)i-=1,a-=t.parent.child(i).nodeSize;for(;l<t.parent.childCount&&dr([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function xt(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const ni=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const o=xt(t,r.schema),{doc:i,selection:a}=n,{$from:l,from:c,to:u}=a;if(s){const d=Hn(l,o,e);if(d&&d.from<=c&&d.to>=u){const p=tt.create(i,d.from,d.to);n.setSelection(p)}}return!0},ri=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function qr(t){return t instanceof tt}function Et(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Vr(t,e=null){if(!e)return null;const n=Nt.atStart(t),r=Nt.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const s=n.from,o=r.to;return e==="all"?tt.create(t,Et(0,s,o),Et(t.content.size,s,o)):tt.create(t,Et(e,s,o),Et(e,s,o))}function si(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function _n(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const oi=(t=null,e={})=>({editor:n,view:r,tr:s,dispatch:o})=>{e={scrollIntoView:!0,...e};const i=()=>{(_n()||si())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!qr(n.state.selection))return i(),!0;const a=Vr(s.doc,t)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),i()),!0},ii=(t,e)=>n=>t.every((r,s)=>e(r,{...n,index:s})),ai=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),Jr=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&Jr(r)}return t};function le(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return Jr(n)}function Qt(t,e,n){if(t instanceof Dr||t instanceof At)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,s=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return At.fromArray(t.map(a=>e.nodeFromJSON(a)));const i=e.nodeFromJSON(t);return n.errorOnInvalidContent&&i.check(),i}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return Qt("",e,n)}if(s){if(n.errorOnInvalidContent){let i=!1,a="";const l=new Br({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(i=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?sn.fromSchema(l).parseSlice(le(t),n.parseOptions):sn.fromSchema(l).parse(le(t),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const o=sn.fromSchema(e);return n.slice?o.parseSlice(le(t),n.parseOptions).content:o.parse(le(t),n.parseOptions)}return Qt("",e,n)}function li(t,e,n){const r=t.steps.length-1;if(r<e)return;const s=t.steps[r];if(!(s instanceof lo||s instanceof co))return;const o=t.mapping.maps[r];let i=0;o.forEach((a,l,c,u)=>{i===0&&(i=u)}),t.setSelection(Nt.near(t.doc.resolve(i),n))}const ci=t=>!("type"in t),ui=(t,e,n)=>({tr:r,dispatch:s,editor:o})=>{var i;if(s){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=h=>{o.emit("contentError",{editor:o,error:h,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Qt(e,o.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(h){l(h)}try{a=Qt(e,o.schema,{parseOptions:c,errorOnInvalidContent:(i=n.errorOnInvalidContent)!==null&&i!==void 0?i:o.options.enableContentCheck})}catch(h){return l(h),!1}let{from:u,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},p=!0,f=!0;if((ci(a)?a:[a]).forEach(h=>{h.check(),p=p?h.isText&&h.marks.length===0:!1,f=f?h.isBlock:!1}),u===d&&f){const{parent:h}=r.doc.resolve(u);h.isTextblock&&!h.type.spec.code&&!h.childCount&&(u-=1,d+=1)}let g;if(p){if(Array.isArray(e))g=e.map(h=>h.text||"").join("");else if(e instanceof At){let h="";e.forEach(m=>{m.text&&(h+=m.text)}),g=h}else typeof e=="object"&&e&&e.text?g=e.text:g=e;r.insertText(g,u,d)}else g=a,r.replaceWith(u,d,g);n.updateSelection&&li(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:g}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:g})}return!0},di=()=>({state:t,dispatch:e})=>Ys(t,e),pi=()=>({state:t,dispatch:e})=>no(t,e),fi=()=>({state:t,dispatch:e})=>ro(t,e),hi=()=>({state:t,dispatch:e})=>eo(t,e),mi=()=>({state:t,dispatch:e,tr:n})=>{try{const r=jr(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},gi=()=>({state:t,dispatch:e,tr:n})=>{try{const r=jr(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},bi=()=>({state:t,dispatch:e})=>to(t,e),yi=()=>({state:t,dispatch:e})=>Zs(t,e);function Qr(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function ki(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,s,o,i;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))_n()||Qr()?i=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const Ei=t=>({editor:e,view:n,tr:r,dispatch:s})=>{const o=ki(t).split(/-(?!$)/),i=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l?.steps.forEach(c=>{const u=c.map(r.mapping);u&&s&&r.maybeStep(u)}),!0};function Xt(t,e,n={}){const{from:r,to:s,empty:o}=t.selection,i=e?q(e,t.schema):null,a=[];t.doc.nodesBetween(r,s,(d,p)=>{if(d.isText)return;const f=Math.max(r,p),b=Math.min(s,p+d.nodeSize);a.push({node:d,from:f,to:b})});const l=s-r,c=a.filter(d=>i?i.name===d.node.type.name:!0).filter(d=>be(d.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((d,p)=>d+p.to-p.from,0)>=l}const Mi=(t,e={})=>({state:n,dispatch:r})=>{const s=q(t,n.schema);return Xt(n,s,e)?Xs(n,r):!1},vi=()=>({state:t,dispatch:e})=>Qs(t,e),Ti=t=>({state:e,dispatch:n})=>{const r=q(t,e.schema);return Js(r)(e,n)},wi=()=>({state:t,dispatch:e})=>Vs(t,e);function Xe(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function pr(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,s)=>(n.includes(s)||(r[s]=t[s]),r),{})}const Ai=(t,e)=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=Xe(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=q(t,r.schema)),a==="mark"&&(i=xt(t,r.schema)),s&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{o&&o===c.type&&n.setNodeMarkup(u,void 0,pr(c.attrs,e)),i&&c.marks.length&&c.marks.forEach(d=>{i===d.type&&n.addMark(u,u+c.nodeSize,i.create(pr(d.attrs,e)))})})}),!0):!1},Si=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),xi=()=>({tr:t,dispatch:e})=>{if(e){const n=new qs(t.doc);t.setSelection(n)}return!0},Ci=()=>({state:t,dispatch:e})=>Gs(t,e),Li=()=>({state:t,dispatch:e})=>Ks(t,e),Oi=()=>({state:t,dispatch:e})=>Ws(t,e),Ri=()=>({state:t,dispatch:e})=>Us(t,e),Ni=()=>({state:t,dispatch:e})=>zs(t,e);function bn(t,e,n={},r={}){return Qt(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const Ii=(t,e=!1,n={},r={})=>({editor:s,tr:o,dispatch:i,commands:a})=>{var l,c;const{doc:u}=o;if(n.preserveWhitespace!=="full"){const d=bn(t,s.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:s.options.enableContentCheck});return i&&o.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return i&&o.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:s.options.enableContentCheck})};function Xr(t,e){const n=xt(e,t.schema),{from:r,to:s,empty:o}=t.selection,i=[];o?(t.storedMarks&&i.push(...t.storedMarks),i.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,s,l=>{i.push(...l.marks)});const a=i.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function Pi(t,e){const n=new Is(t);return e.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function Hi(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function yn(t,e){const n=[];return t.descendants((r,s)=>{e(r)&&n.push({node:r,pos:s})}),n}function _i(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(s,o)=>{n(s)&&r.push({node:s,pos:o})}),r}function Yr(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function $n(t){return e=>Yr(e.$from,t)}function $i(t,e){const n={from:0,to:t.content.size};return Wr(t,n,e)}function Bi(t,e){const n=q(e,t.schema),{from:r,to:s}=t.selection,o=[];t.doc.nodesBetween(r,s,a=>{o.push(a)});const i=o.reverse().find(a=>a.type.name===n.name);return i?{...i.attrs}:{}}function Zr(t,e){const n=Xe(typeof e=="string"?e:e.name,t.schema);return n==="node"?Bi(t,e):n==="mark"?Xr(t,e):{}}function Di(t,e=JSON.stringify){const n={};return t.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function ji(t){const e=Di(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,i)=>i!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function Fi(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((s,o)=>{const i=[];if(s.ranges.length)s.forEach((a,l)=>{i.push({from:a,to:l})});else{const{from:a,to:l}=n[o];if(a===void 0||l===void 0)return;i.push({from:a,to:l})}i.forEach(({from:a,to:l})=>{const c=e.slice(o).map(a,-1),u=e.slice(o).map(l),d=e.invert().map(c,-1),p=e.invert().map(u);r.push({oldRange:{from:d,to:p},newRange:{from:c,to:u}})})}),ji(r)}function Bn(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(s=>{const o=n.resolve(t),i=Hn(o,s.type);i&&r.push({mark:s,...i})}):n.nodesBetween(t,e,(s,o)=>{!s||s?.nodeSize===void 0||r.push(...s.marks.map(i=>({from:o,to:o+s.nodeSize,mark:i})))}),r}function me(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=t.find(o=>o.type===e&&o.name===r);return s?s.attribute.keepOnSplit:!1}))}function kn(t,e,n={}){const{empty:r,ranges:s}=t.selection,o=e?xt(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>o?o.name===d.type.name:!0).find(d=>be(d.attrs,n,{strict:!1}));let i=0;const a=[];if(s.forEach(({$from:d,$to:p})=>{const f=d.pos,b=p.pos;t.doc.nodesBetween(f,b,(g,h)=>{if(!g.isText&&!g.marks.length)return;const m=Math.max(f,h),v=Math.min(b,h+g.nodeSize),A=v-m;i+=A,a.push(...g.marks.map(x=>({mark:x,from:m,to:v})))})}),i===0)return!1;const l=a.filter(d=>o?o.name===d.mark.type.name:!0).filter(d=>be(d.mark.attrs,n,{strict:!1})).reduce((d,p)=>d+p.to-p.from,0),c=a.filter(d=>o?d.mark.type!==o&&d.mark.type.excludes(o):!0).reduce((d,p)=>d+p.to-p.from,0);return(l>0?l+c:l)>=i}function zi(t,e,n={}){if(!e)return Xt(t,null,n)||kn(t,null,n);const r=Xe(e,t.schema);return r==="node"?Xt(t,e,n):r==="mark"?kn(t,e,n):!1}function fr(t,e){const{nodeExtensions:n}=Ve(e),r=n.find(i=>i.name===t);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},o=R(M(r,"group",s));return typeof o!="string"?!1:o.split(" ").includes("list")}function Ye(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(o=>{s!==!1&&(Ye(o,{ignoreWhitespace:n,checkChildren:e})||(s=!1))}),s}return!1}function Ui(t){return t instanceof ne}function Dc(t,e,n){const s=t.state.doc.content.size,o=Et(e,0,s),i=Et(n,0,s),a=t.coordsAtPos(o),l=t.coordsAtPos(i,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),d=Math.min(a.left,l.left),p=Math.max(a.right,l.right),f=p-d,b=u-c,m={top:c,bottom:u,left:d,right:p,width:f,height:b,x:d,y:c};return{...m,toJSON:()=>m}}function Wi(t,e,n){var r;const{selection:s}=e;let o=null;if(qr(s)&&(o=s.$cursor),o){const a=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:i}=s;return i.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,p)=>{if(c)return!1;if(u.isInline){const f=!p||p.type.allowsMarkType(n),b=!!n.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(n));c=f&&b}return!c}),c})}const Ki=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const{selection:o}=n,{empty:i,ranges:a}=o,l=xt(t,r.schema);if(s)if(i){const c=Xr(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(p,f)=>{const b=Math.max(f,u),g=Math.min(f+p.nodeSize,d);p.marks.find(m=>m.type===l)?p.marks.forEach(m=>{l===m.type&&n.addMark(b,g,l.create({...m.attrs,...e}))}):n.addMark(b,g,l.create(e))})});return Wi(r,n,l)},Gi=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),qi=(t,e={})=>({state:n,dispatch:r,chain:s})=>{const o=q(t,n.schema);let i;return n.selection.$anchor.sameParent(n.selection.$head)&&(i=n.selection.$anchor.parent.attrs),o.isTextblock?s().command(({commands:a})=>rr(o,{...i,...e})(n)?!0:a.clearNodes()).command(({state:a})=>rr(o,{...i,...e})(a,r)).run():!1},Vi=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,s=Et(t,0,r.content.size),o=ne.create(r,s);e.setSelection(o)}return!0},Ji=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:s,to:o}=typeof t=="number"?{from:t,to:t}:t,i=tt.atStart(r).from,a=tt.atEnd(r).to,l=Et(s,i,a),c=Et(o,i,a),u=tt.create(r,l,c);e.setSelection(u)}return!0},Qi=t=>({state:e,dispatch:n})=>{const r=q(t,e.schema);return Fs(r)(e,n)};function hr(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(s=>e?.includes(s.type.name));t.tr.ensureMarks(r)}}const Xi=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:s})=>{const{selection:o,doc:i}=e,{$from:a,$to:l}=o,c=s.extensionManager.attributes,u=me(c,a.node().type.name,a.node().attrs);if(o instanceof ne&&o.node.isBlock)return!a.parentOffset||!he(i,a.pos)?!1:(r&&(t&&hr(n,s.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,p=a.depth===0?void 0:Hi(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=d&&p?[{type:p,attrs:u}]:void 0,b=he(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!b&&he(e.doc,e.mapping.map(a.pos),1,p?[{type:p}]:void 0)&&(b=!0,f=p?[{type:p,attrs:u}]:void 0),r){if(b&&(o instanceof tt&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,f),p&&!d&&!a.parentOffset&&a.parent.type!==p)){const g=e.mapping.map(a.before()),h=e.doc.resolve(g);a.node(-1).canReplaceWith(h.index(),h.index()+1,p)&&e.setNodeMarkup(e.mapping.map(a.before()),p)}t&&hr(n,s.extensionManager.splittableMarks),e.scrollIntoView()}return b},Yi=(t,e={})=>({tr:n,state:r,dispatch:s,editor:o})=>{var i;const a=q(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const p=o.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let m=At.empty;const v=l.index(-1)?1:l.index(-2)?2:3;for(let z=l.depth-v;z>=l.depth-3;z-=1)m=At.from(l.node(z).copy(m));const A=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,x={...me(p,l.node().type.name,l.node().attrs),...e},S=((i=a.contentMatch.defaultType)===null||i===void 0?void 0:i.createAndFill(x))||void 0;m=m.append(At.from(a.createAndFill(null,S)||void 0));const P=l.before(l.depth-(v-1));n.replace(P,l.after(-A),new js(m,4-v,0));let $=-1;n.doc.nodesBetween(P,n.doc.content.size,(z,U)=>{if($>-1)return!1;z.isTextblock&&z.content.size===0&&($=U+1)}),$>-1&&n.setSelection(tt.near(n.doc.resolve($))),n.scrollIntoView()}return!0}const f=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,b={...me(p,d.type.name,d.attrs),...e},g={...me(p,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const h=f?[{type:a,attrs:b},{type:f,attrs:g}]:[{type:a,attrs:b}];if(!he(n.doc,l.pos,2))return!1;if(s){const{selection:m,storedMarks:v}=r,{splittableMarks:A}=o.extensionManager,x=v||m.$to.parentOffset&&m.$from.marks();if(n.split(l.pos,2,h).scrollIntoView(),!x||!s)return!0;const S=x.filter(P=>A.includes(P.type.name));n.ensureMarks(S)}return!0},an=(t,e)=>{const n=$n(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===s?.type&&On(t.doc,n.pos)&&t.join(n.pos),!0},ln=(t,e)=>{const n=$n(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===s?.type&&On(t.doc,r)&&t.join(r),!0},Zi=(t,e,n,r={})=>({editor:s,tr:o,state:i,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:p}=s.extensionManager,f=q(t,i.schema),b=q(e,i.schema),{selection:g,storedMarks:h}=i,{$from:m,$to:v}=g,A=m.blockRange(v),x=h||g.$to.parentOffset&&g.$from.marks();if(!A)return!1;const S=$n(P=>fr(P.type.name,d))(g);if(A.depth>=1&&S&&A.depth-S.depth<=1){if(S.node.type===f)return c.liftListItem(b);if(fr(S.node.type.name,d)&&f.validContent(S.node.content)&&a)return l().command(()=>(o.setNodeMarkup(S.pos,f),!0)).command(()=>an(o,f)).command(()=>ln(o,f)).run()}return!n||!x||!a?l().command(()=>u().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>an(o,f)).command(()=>ln(o,f)).run():l().command(()=>{const P=u().wrapInList(f,r),$=x.filter(z=>p.includes(z.type.name));return o.ensureMarks($),P?!0:c.clearNodes()}).wrapInList(f,r).command(()=>an(o,f)).command(()=>ln(o,f)).run()},ta=(t,e={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=n,i=xt(t,r.schema);return kn(r,i,e)?s.unsetMark(i,{extendEmptyMarkRange:o}):s.setMark(i,e)},ea=(t,e,n={})=>({state:r,commands:s})=>{const o=q(t,r.schema),i=q(e,r.schema),a=Xt(r,o,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?s.setNode(i,l):s.setNode(o,{...l,...n})},na=(t,e={})=>({state:n,commands:r})=>{const s=q(t,n.schema);return Xt(n,s,e)?r.lift(s):r.wrapIn(s,e)},ra=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let o;if(s.spec.isInputRules&&(o=s.getState(t))){if(e){const i=t.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)i.step(a.steps[l].invert(a.docs[l]));if(o.text){const l=i.doc.resolve(o.from).marks();i.replaceWith(o.from,o.to,t.schema.text(o.text,l))}else i.delete(o.from,o.to)}return!0}}return!1},sa=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:s}=n;return r||e&&s.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},oa=(t,e={})=>({tr:n,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:i=!1}=e,{selection:a}=n,l=xt(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!s)return!0;if(u&&i){let{from:p,to:f}=a;const b=(o=c.marks().find(h=>h.type===l))===null||o===void 0?void 0:o.attrs,g=Hn(c,l,b);g&&(p=g.from,f=g.to),n.removeMark(p,f,l)}else d.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,l)});return n.removeStoredMark(l),!0},ia=(t,e={})=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=Xe(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=q(t,r.schema)),a==="mark"&&(i=xt(t,r.schema)),s&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,p,f,b;n.selection.empty?r.doc.nodesBetween(c,u,(g,h)=>{o&&o===g.type&&(f=Math.max(h,c),b=Math.min(h+g.nodeSize,u),d=h,p=g)}):r.doc.nodesBetween(c,u,(g,h)=>{h<c&&o&&o===g.type&&(f=Math.max(h,c),b=Math.min(h+g.nodeSize,u),d=h,p=g),h>=c&&h<=u&&(o&&o===g.type&&n.setNodeMarkup(h,void 0,{...g.attrs,...e}),i&&g.marks.length&&g.marks.forEach(m=>{if(i===m.type){const v=Math.max(h,c),A=Math.min(h+g.nodeSize,u);n.addMark(v,A,i.create({...m.attrs,...e}))}}))}),p&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...p.attrs,...e}),i&&p.marks.length&&p.marks.forEach(g=>{i===g.type&&n.addMark(f,b,i.create({...g.attrs,...e}))}))}),!0):!1},aa=(t,e={})=>({state:n,dispatch:r})=>{const s=q(t,n.schema);return Ds(s,e)(n,r)},la=(t,e={})=>({state:n,dispatch:r})=>{const s=q(t,n.schema);return Bs(s,e)(n,r)};var ca=Object.freeze({__proto__:null,blur:Wo,clearContent:Ko,clearNodes:Go,command:qo,createParagraphNear:Vo,cut:Jo,deleteCurrentNode:Qo,deleteNode:Xo,deleteRange:Yo,deleteSelection:Zo,enter:ti,exitCode:ei,extendMarkRange:ni,first:ri,focus:oi,forEach:ii,insertContent:ai,insertContentAt:ui,joinBackward:fi,joinDown:pi,joinForward:hi,joinItemBackward:mi,joinItemForward:gi,joinTextblockBackward:bi,joinTextblockForward:yi,joinUp:di,keyboardShortcut:Ei,lift:Mi,liftEmptyBlock:vi,liftListItem:Ti,newlineInCode:wi,resetAttributes:Ai,scrollIntoView:Si,selectAll:xi,selectNodeBackward:Ci,selectNodeForward:Li,selectParentNode:Oi,selectTextblockEnd:Ri,selectTextblockStart:Ni,setContent:Ii,setMark:Ki,setMeta:Gi,setNode:qi,setNodeSelection:Vi,setTextSelection:Ji,sinkListItem:Qi,splitBlock:Xi,splitListItem:Yi,toggleList:Zi,toggleMark:ta,toggleNode:ea,toggleWrap:na,undoInputRule:ra,unsetAllMarks:sa,unsetMark:oa,updateAttributes:ia,wrapIn:aa,wrapInList:la});const ua=G.create({name:"commands",addCommands(){return{...ca}}}),da=G.create({name:"drop",addProseMirrorPlugins(){return[new X({key:new Z("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),pa=G.create({name:"editable",addProseMirrorPlugins(){return[new X({key:new Z("editable"),props:{editable:()=>this.editor.options.editable}})]}}),fa=new Z("focusEvents"),ha=G.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new X({key:fa,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),ma=G.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:p,parent:f}=d,b=d.parent.isTextblock&&p>0?a.doc.resolve(p-1):d,g=b.parent.type.spec.isolating,h=d.pos-d.parentOffset,m=g&&b.parent.childCount===1?h===d.pos:Nt.atStart(c).from===p;return!u||!f.type.isTextblock||f.textContent.length||!m||m&&d.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return _n()||Qr()?o:s},addProseMirrorPlugins(){return[new X({key:new Z("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),s=t.some(g=>g.getMeta("preventClearDocument"));if(!r||s)return;const{empty:o,from:i,to:a}=e.selection,l=Nt.atStart(e.doc).from,c=Nt.atEnd(e.doc).to;if(o||!(i===l&&a===c)||!Ye(n.doc))return;const p=n.tr,f=Ge({state:n,transaction:p}),{commands:b}=new qe({editor:this.editor,state:f});if(b.clearNodes(),!!p.steps.length)return p}})]}}),ga=G.create({name:"paste",addProseMirrorPlugins(){return[new X({key:new Z("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),ba=G.create({name:"tabindex",addProseMirrorPlugins(){return[new X({key:new Z("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Ot{get name(){return this.node.type.name}constructor(e,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=s}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0)return;n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Ot(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Ot(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Ot(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,i=this.pos+r+(o?0:1);if(i<0||i>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(i);if(!s&&a.depth<=this.depth)return;const l=new Ot(a,this.editor,s,s?n:null);s&&(l.actualDepth=this.depth+1),e.push(new Ot(a,this.editor,s,s?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(n).length>0){const o=s.node.attrs,i=Object.keys(n);for(let a=0;a<i.length;a+=1){const l=i[a];if(o[l]!==n[l])break}}else r=s;s=s.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const o=Object.keys(n);return this.children.forEach(i=>{r&&s.length>0||(i.node.type.name===e&&o.every(l=>n[l]===i.node.attrs[l])&&s.push(i),!(r&&s.length>0)&&(s=s.concat(i.querySelectorAll(e,n,r))))}),s}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const ya=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function ka(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}class jc extends Co{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:s})=>this.options.onDrop(n,r,s)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=ka(ya,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=Ur(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(o=>{const i=typeof o=="string"?`${o}$`:o.key;r=r.filter(a=>!a.key.startsWith(i))}),n.length===r.length)return;const s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}createExtensionManager(){var e,n;const s=[...this.options.enableCoreExtensions?[pa,Uo.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),ua,ha,ma,ba,da,ga].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o?.type));this.extensionManager=new Dt(s,this)}createCommandManager(){this.commandManager=new qe({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=bn(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(i){if(!(i instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(i.message))throw i;this.emit("contentError",{editor:this,error:i,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=bn(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=Vr(n,this.options.autofocus);this.view=new Ps(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Hs.create({doc:n,selection:r||void 0})});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(i=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(i)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),o=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Zr(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,s=typeof e=="string"?n:e;return zi(this.state,r,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return In(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return $i(this.state.doc,{blockSeparator:n,textSerializers:{...Kr(this.schema),...r}})}get isEmpty(){return Ye(this.state.doc)}getCharacterCount(){return this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Ot(n,this)}get $doc(){return this.$pos(0)}}function Pt(t){return new Je({find:t.find,handler:({state:e,range:n,match:r})=>{const s=R(t.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:o}=e,i=r[r.length-1],a=r[0];if(i){const l=a.search(/\S/),c=n.from+a.indexOf(i),u=c+i.length;if(Bn(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(g=>g===t.type&&g!==f.mark.type)).filter(f=>f.to>c).length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+l,c);const p=n.from+l+i.length;o.addMark(n.from+l,p,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}function ts(t){return new Je({find:t.find,handler:({state:e,range:n,match:r})=>{const s=R(t.getAttributes,void 0,r)||{},{tr:o}=e,i=n.from;let a=n.to;const l=t.type.create(s);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=i+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];o.insertText(d,i+r[0].length-1),o.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?i:i-1;o.insert(c,t.type.create(s)).delete(o.mapping.map(i),o.mapping.map(a))}o.scrollIntoView()}})}function En(t){return new Je({find:t.find,handler:({state:e,range:n,match:r})=>{const s=e.doc.resolve(n.from),o=R(t.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function jt(t){return new Je({find:t.find,handler:({state:e,range:n,match:r,chain:s})=>{const o=R(t.getAttributes,void 0,r)||{},i=e.tr.delete(n.from,n.to),l=i.doc.resolve(n.from).blockRange(),c=l&&Ns(l,t.type,o);if(!c)return null;if(i.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:p}=e,{splittableMarks:f}=t.editor.extensionManager,b=p||d.$to.parentOffset&&d.$from.marks();if(b){const g=b.filter(h=>f.includes(h.type.name));i.ensureMarks(g)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(d,o).run()}const u=i.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&On(i.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&i.join(n.from-1)}})}class K{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0,this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=R(M(this,"addOptions",{name:this.name}))),this.storage=R(M(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new K(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Qe(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new K(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0,n.options=R(M(n,"addOptions",{name:n.name})),n.storage=R(M(n,"addStorage",{name:n.name,options:n.options})),n}}function St(t){return new $o({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:s})=>{const o=R(t.getAttributes,void 0,r,s);if(o===!1||o===null)return null;const{tr:i}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),p=d+a.length;if(Bn(n.from,n.to,e.doc).filter(b=>b.mark.type.excluded.find(h=>h===t.type&&h!==b.mark.type)).filter(b=>b.to>d).length)return null;p<n.to&&i.delete(p,n.to),d>n.from&&i.delete(n.from+u,d),c=n.from+u+a.length,i.addMark(n.from+u,c,t.type.create(o||{})),i.removeStoredMark(t.type)}}})}function Ea(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof ne){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let s=r.depth;for(;s>=0;){const o=r.index(s);if(r.node(s).contentMatchAt(o).matchType(e))return!0;s-=1}return!1}function Ma(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}const va=/^\s*>\s$/,Ta=K.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",I(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[jt({find:va,type:this.type})]}}),wa=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Aa=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Sa=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,xa=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Ca=st.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",I(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Pt({find:wa,type:this.type}),Pt({find:Sa,type:this.type})]},addPasteRules(){return[St({find:Aa,type:this.type}),St({find:xa,type:this.type})]}}),La="listItem",mr="textStyle",gr=/^\s*([-+*])\s$/,Oa=K.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",I(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(La,this.editor.getAttributes(mr)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=jt({find:gr,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=jt({find:gr,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(mr),editor:this.editor})),[t]}}),Ra=/(^|[^`])`([^`]+)`(?!`)/,Na=/(^|[^`])`([^`]+)`(?!`)/g,Ia=st.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",I(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Pt({find:Ra,type:this.type})]},addPasteRules(){return[St({find:Na,type:this.type})]}}),Pa=/^```([a-z]+)?[\s\n]$/,Ha=/^~~~([a-z]+)?[\s\n]$/,es=K.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(i=>i.startsWith(n)).map(i=>i.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",I(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith(`

`);return!o||!i?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:s,empty:o}=n;if(!o||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(Nt.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[En({find:Pa,type:this.type,getAttributes:t=>({language:t[1]})}),En({find:Ha,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new X({key:new Z("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,o=s?.mode;if(!n||!o)return!1;const{tr:i,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return i.replaceSelectionWith(this.type.create({language:o},l)),i.selection.$from.parent.type!==this.type&&i.setSelection(tt.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.setMeta("paste",!0),t.dispatch(i),!0}}})]}}),_a=K.create({name:"doc",topNode:!0,content:"block+"}),$a=G.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[uo(this.options)]}}),Ba=G.create({name:"gapCursor",addProseMirrorPlugins(){return[po()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=R(M(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),Da=K.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",I(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:o}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,l=o||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&i){const d=l.filter(p=>a.includes(p.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),ja=K.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,I(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>En({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),Fa=G.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>mo(t,e),redo:()=>({state:t,dispatch:e})=>ho(t,e)}},addProseMirrorPlugins(){return[fo(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-Ñ":()=>this.editor.commands.undo(),"Shift-Mod-Ñ":()=>this.editor.commands.redo()}}}),za=K.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",I(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!Ea(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$from:r,$to:s}=n,o=t();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:s.pos},{type:this.name}):Ui(n)?o.insertContentAt(s.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:i,dispatch:a})=>{var l;if(a){const{$to:c}=i.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?i.setSelection(tt.create(i.doc,c.pos+1)):c.nodeAfter.isBlock?i.setSelection(ne.create(i.doc,c.pos)):i.setSelection(tt.create(i.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(i.insert(u,d),i.setSelection(tt.create(i.doc,u+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[ts({find:/^(?:---|â-|___\s|\*\*\*\s)$/,type:this.type})]}}),Ua=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Wa=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Ka=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Ga=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,qa=st.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",I(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Pt({find:Ua,type:this.type}),Pt({find:Ka,type:this.type})]},addPasteRules(){return[St({find:Wa,type:this.type}),St({find:Ga,type:this.type})]}}),Va=K.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",I(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Ja="listItem",br="textStyle",yr=/^(\d+)\.\s$/,Qa=K.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",I(this.options.HTMLAttributes,n),0]:["ol",I(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Ja,this.editor.getAttributes(br)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=jt({find:yr,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=jt({find:yr,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(br)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),Xa=K.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",I(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Ya=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Za=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,tl=st.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",I(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Pt({find:Ya,type:this.type})]},addPasteRules(){return[St({find:Za,type:this.type})]}}),el=K.create({name:"text",group:"inline"}),Fc=G.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(Ca.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(Ta.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(Oa.configure(this.options.bulletList)),this.options.code!==!1&&t.push(Ia.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(es.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(_a.configure(this.options.document)),this.options.dropcursor!==!1&&t.push($a.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(Ba.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(Da.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(ja.configure(this.options.heading)),this.options.history!==!1&&t.push(Fa.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(za.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(qa.configure(this.options.italic)),this.options.listItem!==!1&&t.push(Va.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(Qa.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(Xa.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(tl.configure(this.options.strike)),this.options.text!==!1&&t.push(el.configure(this.options.text)),t}}),zc=st.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",I(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),nl=t=>{if(!t.children.length)return;const e=t.querySelectorAll("span");e&&e.forEach(n=>{var r,s;const o=n.getAttribute("style"),i=(s=(r=n.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||s===void 0?void 0:s.getAttribute("style");n.setAttribute("style",`${i};${o}`)})},Uc=st.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&nl(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",I(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(s=>s.type===this.type).some(s=>Object.values(s.attrs).some(o=>!!o))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),Wc=G.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),rl=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,sl=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,Kc=st.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",I(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Pt({find:rl,type:this.type})]},addPasteRules(){return[St({find:sl,type:this.type})]}}),Gc=G.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;return(e=t.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),qc=G.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),ol=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Vc=K.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",I(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[ts({find:ol,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}});function Mn(t,e){return e?["width",`${Math.max(e,t)}px`]:["min-width",`${t}px`]}function kr(t,e,n,r,s,o){var i;let a=0,l=!0,c=e.firstChild;const u=t.firstChild;if(u!==null)for(let d=0,p=0;d<u.childCount;d+=1){const{colspan:f,colwidth:b}=u.child(d).attrs;for(let g=0;g<f;g+=1,p+=1){const h=s===p?o:b&&b[g],m=h?`${h}px`:"";if(a+=h||r,h||(l=!1),c){if(c.style.width!==m){const[v,A]=Mn(r,h);c.style.setProperty(v,A)}c=c.nextSibling}else{const v=document.createElement("col"),[A,x]=Mn(r,h);v.style.setProperty(A,x),e.appendChild(v)}}}for(;c;){const d=c.nextSibling;(i=c.parentNode)===null||i===void 0||i.removeChild(c),c=d}l?(n.style.width=`${a}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${a}px`)}class il{constructor(e,n){this.node=e,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),kr(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,kr(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}}function al(t,e,n,r){let s=0,o=!0;const i=[],a=t.firstChild;if(!a)return{};for(let d=0,p=0;d<a.childCount;d+=1){const{colspan:f,colwidth:b}=a.child(d).attrs;for(let g=0;g<f;g+=1,p+=1){const h=n===p?r:b&&b[g];s+=h||e,h||(o=!1);const[m,v]=Mn(e,h);i.push(["col",{style:`${m}: ${v}`}])}}const l=o?`${s}px`:"",c=o?"":`${s}px`;return{colgroup:["colgroup",{},...i],tableWidth:l,tableMinWidth:c}}function Er(t,e){return t.createAndFill()}function ll(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function cl(t,e,n,r,s){const o=ll(t),i=[],a=[];for(let c=0;c<n;c+=1){const u=Er(o.cell);if(u&&a.push(u),r){const d=Er(o.header_cell);d&&i.push(d)}}const l=[];for(let c=0;c<e;c+=1)l.push(o.row.createChecked(null,r&&c===0?i:a));return o.table.createChecked(null,l)}function ul(t){return t instanceof Fr}const ce=({editor:t})=>{const{selection:e}=t.state;if(!ul(e))return!1;let n=0;const r=Yr(e.ranges[0].$from,o=>o.type.name==="table");return r?.node.descendants(o=>{if(o.type.name==="table")return!1;["tableCell","tableHeader"].includes(o.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},Jc=K.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,renderWrapper:!1,handleWidth:5,cellMinWidth:25,View:il,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){const{colgroup:n,tableWidth:r,tableMinWidth:s}=al(t,this.options.cellMinWidth),o=["table",I(this.options.HTMLAttributes,e,{style:r?`width: ${r}`:`min-width: ${s}`}),n,["tbody",0]];return this.options.renderWrapper?["div",{class:"tableWrapper"},o]:o},addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:s,editor:o})=>{const i=cl(o.schema,t,e,n);if(s){const a=r.selection.from+1;r.replaceSelectionWith(i).scrollIntoView().setSelection(tt.near(r.doc.resolve(a)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>xo(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>So(t,e),deleteColumn:()=>({state:t,dispatch:e})=>Ao(t,e),addRowBefore:()=>({state:t,dispatch:e})=>wo(t,e),addRowAfter:()=>({state:t,dispatch:e})=>To(t,e),deleteRow:()=>({state:t,dispatch:e})=>vo(t,e),deleteTable:()=>({state:t,dispatch:e})=>Mo(t,e),mergeCells:()=>({state:t,dispatch:e})=>or(t,e),splitCell:()=>({state:t,dispatch:e})=>ir(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>ar("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>ar("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>Eo(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>or(t,e)?!0:ir(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>ko(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>sr(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>sr(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&yo(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=Fr.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:ce,"Mod-Backspace":ce,Delete:ce,"Mod-Delete":ce}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[go({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],bo({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:R(M(t,"tableRole",e))}}}),Qc=K.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",I(this.options.HTMLAttributes,t),0]}}),Xc=K.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",I(this.options.HTMLAttributes,t),0]}}),Yc=K.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",I(this.options.HTMLAttributes,t),0]}}),Zc=G.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new X({key:new Z("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const s=this.options.limit;if(s==null||s===0){t=!0;return}const o=this.storage.characters({node:r.doc});if(o>s){const i=o-s,a=0,l=i,c=r.tr.deleteRange(a,l);return t=!0,c}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:n.doc}),o=this.storage.characters({node:e.doc});if(o<=r||s>r&&o>r&&o<=s)return!0;if(s>r&&o>r&&o>s||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=o-r,c=a-l,u=a;return e.deleteRange(c,u),!(this.storage.characters({node:e.doc})>r)}})]}}),dl="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mÃ¶gensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",pl="ÎµÎ»1Ï2Ð±Ð³1ÐµÐ»3Ð´ÐµÑÐ¸4ÐµÑ2ÐºÐ°ÑÐ¾Ð»Ð¸Ðº6Ð¾Ð¼3Ð¼ÐºÐ´2Ð¾Ð½1ÑÐºÐ²Ð°6Ð¾Ð½Ð»Ð°Ð¹Ð½5ÑÐ³3ÑÑÑ2Ñ2ÑÐ°Ð¹Ñ3ÑÐ±3ÑÐºÑ3ÒÐ°Ð·3Õ°Õ¡Õµ3××©×¨××5×§××3Ø§Ø¨ÙØ¸Ø¨Ù5Ø±Ø§ÙÙÙ5ÙØ§Ø±Ø¯Ù4Ø¨Ø­Ø±ÙÙ5Ø¬Ø²Ø§Ø¦Ø±5Ø³Ø¹ÙØ¯ÙØ©6Ø¹ÙÙØ§Ù5ÙØºØ±Ø¨5ÙØ§Ø±Ø§Øª5ÛØ±Ø§Ù5Ø¨Ø§Ø±Øª2Ø²Ø§Ø±4ÙØªÙ3Ú¾Ø§Ø±Øª5ØªÙÙØ³4Ø³ÙØ¯Ø§Ù3Ø±ÙØ©5Ø´Ø¨ÙØ©4Ø¹Ø±Ø§Ù2Ø¨2ÙØ§Ù4ÙÙØ³Ø·ÙÙ6ÙØ·Ø±3ÙØ§Ø«ÙÙÙÙ6ÙÙ3ÙØµØ±2ÙÙØ³ÙØ§5ÙØ±ÙØªØ§ÙÙØ§7ÙØ¹4ÙÙØ±Ø§Ù5Ù¾Ø§Ú©Ø³ØªØ§Ù7ÚØ§Ø±Øª4à¤à¥à¤®3à¤¨à¥à¤3à¤­à¤¾à¤°à¤¤0à¤®à¥3à¥à¤¤5à¤¸à¤à¤à¤ à¤¨5à¦¬à¦¾à¦à¦²à¦¾5à¦­à¦¾à¦°à¦¤2à§°à¦¤4à¨­à¨¾à¨°à¨¤4àª­àª¾àª°àª¤4à¬­à¬¾à¬°à¬¤4à®à®¨à¯à®¤à®¿à®¯à®¾6à®²à®à¯à®à¯6à®à®¿à®à¯à®à®ªà¯à®ªà¯à®°à¯11à°­à°¾à°°à°¤à±5à²­à²¾à²°à²¤4à´­à´¾à´°à´¤à´5à¶½à¶à¶à·4à¸à¸­à¸¡3à¹à¸à¸¢3àº¥àº²àº§3áá2ã¿ããª3ã¢ãã¾ã³4ã¯ã©ã¦ã4ã°ã¼ã°ã«4ã³ã 2ã¹ãã¢3ã»ã¼ã«3ãã¡ãã·ã§ã³6ãã¤ã³ã4ä¸ç2ä¸­ä¿¡1å½1å1æç½3äºé©¬é3ä¼ä¸2ä½å±±2ä¿¡æ¯2å¥åº·2å«å¦2å¬å¸1ç2å°æ¹¾1ç£2åå1åº1æ 2åé0å¤§éåº5å¨çº¿2å¤§æ¿2å¤©ä¸»æ3å¨±ä¹2å®¶é»2å¹¿ä¸2å¾®å2æå2æç±ä½ 3ææº2æè2æ¿å¡1åº2æ°å å¡2é»2æ¶å°2æ¸ç±2æºæ2æ·¡é©¬é¡3æ¸¸æ2æ¾³é2ç¹ç2ç§»å¨2ç»ç»æºæ4ç½å1åº1ç«1ç»2èé2è°·æ­2è´­ç©2éè²©2éå¢2é»è¨çç§4é£å©æµ¦3é£å2é¤å2é¦æ ¼éæ3æ¸¯2ë·ë·1ì»´2ì¼ì±2íêµ­2",vn="numeric",Tn="ascii",wn="alpha",Wt="asciinumeric",Ut="alphanumeric",An="domain",ns="emoji",fl="scheme",hl="slashscheme",cn="whitespace";function ml(t,e){return t in e||(e[t]=[]),e[t]}function Rt(t,e,n){e[vn]&&(e[Wt]=!0,e[Ut]=!0),e[Tn]&&(e[Wt]=!0,e[wn]=!0),e[Wt]&&(e[Ut]=!0),e[wn]&&(e[Ut]=!0),e[Ut]&&(e[An]=!0),e[ns]&&(e[An]=!0);for(const r in e){const s=ml(r,n);s.indexOf(t)<0&&s.push(t)}}function gl(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function rt(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}rt.groups={};rt.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],o=e.jr[r][1];if(o&&s.test(t))return o}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let s=0;s<t.length;s++)this.tt(t[s],e,n,r)},tr(t,e,n,r){r=r||rt.groups;let s;return e&&e.j?s=e:(s=new rt(e),n&&r&&Rt(e,n,r)),this.jr.push([t,s]),s},ts(t,e,n,r){let s=this;const o=t.length;if(!o)return s;for(let i=0;i<o-1;i++)s=s.tt(t[i]);return s.tt(t[o-1],e,n,r)},tt(t,e,n,r){r=r||rt.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const o=e;let i,a=s.go(t);if(a?(i=new rt,Object.assign(i.j,a.j),i.jr.push.apply(i.jr,a.jr),i.jd=a.jd,i.t=a.t):i=new rt,o){if(r)if(i.t&&typeof i.t=="string"){const l=Object.assign(gl(i.t,r),n);Rt(o,l,r)}else n&&Rt(o,n,r);i.t=o}return s.j[t]=i,i}};const O=(t,e,n,r,s)=>t.ta(e,n,r,s),W=(t,e,n,r,s)=>t.tr(e,n,r,s),Mr=(t,e,n,r,s)=>t.ts(e,n,r,s),k=(t,e,n,r,s)=>t.tt(e,n,r,s),kt="WORD",Sn="UWORD",rs="ASCIINUMERICAL",ss="ALPHANUMERICAL",Yt="LOCALHOST",xn="TLD",Cn="UTLD",ge="SCHEME",Bt="SLASH_SCHEME",Dn="NUM",Ln="WS",jn="NL",Kt="OPENBRACE",Gt="CLOSEBRACE",ye="OPENBRACKET",ke="CLOSEBRACKET",Ee="OPENPAREN",Me="CLOSEPAREN",ve="OPENANGLEBRACKET",Te="CLOSEANGLEBRACKET",we="FULLWIDTHLEFTPAREN",Ae="FULLWIDTHRIGHTPAREN",Se="LEFTCORNERBRACKET",xe="RIGHTCORNERBRACKET",Ce="LEFTWHITECORNERBRACKET",Le="RIGHTWHITECORNERBRACKET",Oe="FULLWIDTHLESSTHAN",Re="FULLWIDTHGREATERTHAN",Ne="AMPERSAND",Ie="APOSTROPHE",Pe="ASTERISK",vt="AT",He="BACKSLASH",_e="BACKTICK",$e="CARET",Tt="COLON",Fn="COMMA",Be="DOLLAR",ht="DOT",De="EQUALS",zn="EXCLAMATION",ct="HYPHEN",qt="PERCENT",je="PIPE",Fe="PLUS",ze="POUND",Vt="QUERY",Un="QUOTE",os="FULLWIDTHMIDDLEDOT",Wn="SEMI",mt="SLASH",Jt="TILDE",Ue="UNDERSCORE",is="EMOJI",We="SYM";var as=Object.freeze({__proto__:null,ALPHANUMERICAL:ss,AMPERSAND:Ne,APOSTROPHE:Ie,ASCIINUMERICAL:rs,ASTERISK:Pe,AT:vt,BACKSLASH:He,BACKTICK:_e,CARET:$e,CLOSEANGLEBRACKET:Te,CLOSEBRACE:Gt,CLOSEBRACKET:ke,CLOSEPAREN:Me,COLON:Tt,COMMA:Fn,DOLLAR:Be,DOT:ht,EMOJI:is,EQUALS:De,EXCLAMATION:zn,FULLWIDTHGREATERTHAN:Re,FULLWIDTHLEFTPAREN:we,FULLWIDTHLESSTHAN:Oe,FULLWIDTHMIDDLEDOT:os,FULLWIDTHRIGHTPAREN:Ae,HYPHEN:ct,LEFTCORNERBRACKET:Se,LEFTWHITECORNERBRACKET:Ce,LOCALHOST:Yt,NL:jn,NUM:Dn,OPENANGLEBRACKET:ve,OPENBRACE:Kt,OPENBRACKET:ye,OPENPAREN:Ee,PERCENT:qt,PIPE:je,PLUS:Fe,POUND:ze,QUERY:Vt,QUOTE:Un,RIGHTCORNERBRACKET:xe,RIGHTWHITECORNERBRACKET:Le,SCHEME:ge,SEMI:Wn,SLASH:mt,SLASH_SCHEME:Bt,SYM:We,TILDE:Jt,TLD:xn,UNDERSCORE:Ue,UTLD:Cn,UWORD:Sn,WORD:kt,WS:Ln});const bt=/[a-z]/,zt=/\p{L}/u,un=/\p{Emoji}/u,yt=/\d/,dn=/\s/,vr="\r",pn=`
`,bl="ï¸",yl="â",fn="ï¿¼";let ue=null,de=null;function kl(t=[]){const e={};rt.groups=e;const n=new rt;ue==null&&(ue=Tr(dl)),de==null&&(de=Tr(pl)),k(n,"'",Ie),k(n,"{",Kt),k(n,"}",Gt),k(n,"[",ye),k(n,"]",ke),k(n,"(",Ee),k(n,")",Me),k(n,"<",ve),k(n,">",Te),k(n,"ï¼",we),k(n,"ï¼",Ae),k(n,"ã",Se),k(n,"ã",xe),k(n,"ã",Ce),k(n,"ã",Le),k(n,"ï¼",Oe),k(n,"ï¼",Re),k(n,"&",Ne),k(n,"*",Pe),k(n,"@",vt),k(n,"`",_e),k(n,"^",$e),k(n,":",Tt),k(n,",",Fn),k(n,"$",Be),k(n,".",ht),k(n,"=",De),k(n,"!",zn),k(n,"-",ct),k(n,"%",qt),k(n,"|",je),k(n,"+",Fe),k(n,"#",ze),k(n,"?",Vt),k(n,'"',Un),k(n,"/",mt),k(n,";",Wn),k(n,"~",Jt),k(n,"_",Ue),k(n,"\\",He),k(n,"ã»",os);const r=W(n,yt,Dn,{[vn]:!0});W(r,yt,r);const s=W(r,bt,rs,{[Wt]:!0}),o=W(r,zt,ss,{[Ut]:!0}),i=W(n,bt,kt,{[Tn]:!0});W(i,yt,s),W(i,bt,i),W(s,yt,s),W(s,bt,s);const a=W(n,zt,Sn,{[wn]:!0});W(a,bt),W(a,yt,o),W(a,zt,a),W(o,yt,o),W(o,bt),W(o,zt,o);const l=k(n,pn,jn,{[cn]:!0}),c=k(n,vr,Ln,{[cn]:!0}),u=W(n,dn,Ln,{[cn]:!0});k(n,fn,u),k(c,pn,l),k(c,fn,u),W(c,dn,u),k(u,vr),k(u,pn),W(u,dn,u),k(u,fn,u);const d=W(n,un,is,{[ns]:!0});k(d,"#"),W(d,un,d),k(d,bl,d);const p=k(d,yl);k(p,"#"),W(p,un,d);const f=[[bt,i],[yt,s]],b=[[bt,null],[zt,a],[yt,o]];for(let g=0;g<ue.length;g++)Mt(n,ue[g],xn,kt,f);for(let g=0;g<de.length;g++)Mt(n,de[g],Cn,Sn,b);Rt(xn,{tld:!0,ascii:!0},e),Rt(Cn,{utld:!0,alpha:!0},e),Mt(n,"file",ge,kt,f),Mt(n,"mailto",ge,kt,f),Mt(n,"http",Bt,kt,f),Mt(n,"https",Bt,kt,f),Mt(n,"ftp",Bt,kt,f),Mt(n,"ftps",Bt,kt,f),Rt(ge,{scheme:!0,ascii:!0},e),Rt(Bt,{slashscheme:!0,ascii:!0},e),t=t.sort((g,h)=>g[0]>h[0]?1:-1);for(let g=0;g<t.length;g++){const h=t[g][0],v=t[g][1]?{[fl]:!0}:{[hl]:!0};h.indexOf("-")>=0?v[An]=!0:bt.test(h)?yt.test(h)?v[Wt]=!0:v[Tn]=!0:v[vn]=!0,Mr(n,h,h,v)}return Mr(n,"localhost",Yt,{ascii:!0}),n.jd=new rt(We),{start:n,tokens:Object.assign({groups:e},as)}}function ls(t,e){const n=El(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,s=[];let o=0,i=0;for(;i<r;){let a=t,l=null,c=0,u=null,d=-1,p=-1;for(;i<r&&(l=a.go(n[i]));)a=l,a.accepts()?(d=0,p=0,u=a):d>=0&&(d+=n[i].length,p++),c+=n[i].length,o+=n[i].length,i++;o-=d,i-=p,c-=d,s.push({t:u.t,v:e.slice(o-c,o),s:o-c,e:o})}return s}function El(t){const e=[],n=t.length;let r=0;for(;r<n;){let s=t.charCodeAt(r),o,i=s<55296||s>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(i),r+=i.length}return e}function Mt(t,e,n,r,s){let o;const i=e.length;for(let a=0;a<i-1;a++){const l=e[a];t.j[l]?o=t.j[l]:(o=new rt(r),o.jr=s.slice(),t.j[l]=o),t=o}return o=new rt(n),o.jr=s.slice(),t.j[e[i-1]]=o,o}function Tr(t){const e=[],n=[];let r=0,s="0123456789";for(;r<t.length;){let o=0;for(;s.indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let i=parseInt(t.substring(r,r+o),10);i>0;i--)n.pop();r+=o}else n.push(t[r]),r++}return e}const Zt={defaultProtocol:"http",events:null,format:wr,formatHref:wr,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Kn(t,e=null){let n=Object.assign({},Zt);t&&(n=Object.assign(n,t instanceof Kn?t.o:t));const r=n.ignoreTags,s=[];for(let o=0;o<r.length;o++)s.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=s}Kn.prototype={o:Zt,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:Zt[t],typeof s=="function"&&r&&(s=s(e,n))):typeof s=="function"&&r&&(s=s(e,n.t,n)),s)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function wr(t){return t}function cs(t,e){this.t="token",this.v=t,this.tk=e}cs.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"â¦":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Zt.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),s=t.get("tagName",n,e),o=this.toFormattedString(t),i={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),u=t.getObj("attributes",n,e),d=t.getObj("events",n,e);return i.href=r,a&&(i.class=a),l&&(i.target=l),c&&(i.rel=c),u&&Object.assign(i,u),{tagName:s,attributes:i,content:o,eventListeners:d}}};function Ze(t,e){class n extends cs{constructor(s,o){super(s,o),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const Ar=Ze("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Sr=Ze("text"),Ml=Ze("nl"),pe=Ze("url",{isLink:!0,toHref(t=Zt.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Yt&&t[1].t===Tt}}),lt=t=>new rt(t);function vl({groups:t}){const e=t.domain.concat([Ne,Pe,vt,He,_e,$e,Be,De,ct,Dn,qt,je,Fe,ze,mt,We,Jt,Ue]),n=[Ie,Tt,Fn,ht,zn,qt,Vt,Un,Wn,ve,Te,Kt,Gt,ke,ye,Ee,Me,we,Ae,Se,xe,Ce,Le,Oe,Re],r=[Ne,Ie,Pe,He,_e,$e,Be,De,ct,Kt,Gt,qt,je,Fe,ze,Vt,mt,We,Jt,Ue],s=lt(),o=k(s,Jt);O(o,r,o),O(o,t.domain,o);const i=lt(),a=lt(),l=lt();O(s,t.domain,i),O(s,t.scheme,a),O(s,t.slashscheme,l),O(i,r,o),O(i,t.domain,i);const c=k(i,vt);k(o,vt,c),k(a,vt,c),k(l,vt,c);const u=k(o,ht);O(u,r,o),O(u,t.domain,o);const d=lt();O(c,t.domain,d),O(d,t.domain,d);const p=k(d,ht);O(p,t.domain,d);const f=lt(Ar);O(p,t.tld,f),O(p,t.utld,f),k(c,Yt,f);const b=k(d,ct);k(b,ct,b),O(b,t.domain,d),O(f,t.domain,d),k(f,ht,p),k(f,ct,b);const g=k(f,Tt);O(g,t.numeric,Ar);const h=k(i,ct),m=k(i,ht);k(h,ct,h),O(h,t.domain,i),O(m,r,o),O(m,t.domain,i);const v=lt(pe);O(m,t.tld,v),O(m,t.utld,v),O(v,t.domain,i),O(v,r,o),k(v,ht,m),k(v,ct,h),k(v,vt,c);const A=k(v,Tt),x=lt(pe);O(A,t.numeric,x);const S=lt(pe),P=lt();O(S,e,S),O(S,n,P),O(P,e,S),O(P,n,P),k(v,mt,S),k(x,mt,S);const $=k(a,Tt),z=k(l,Tt),U=k(z,mt),ot=k(U,mt);O(a,t.domain,i),k(a,ht,m),k(a,ct,h),O(l,t.domain,i),k(l,ht,m),k(l,ct,h),O($,t.domain,S),k($,mt,S),k($,Vt,S),O(ot,t.domain,S),O(ot,e,S),k(ot,mt,S);const it=[[Kt,Gt],[ye,ke],[Ee,Me],[ve,Te],[we,Ae],[Se,xe],[Ce,Le],[Oe,Re]];for(let B=0;B<it.length;B++){const[V,ut]=it[B],at=k(S,V);k(P,V,at),k(at,ut,S);const dt=lt(pe);O(at,e,dt);const y=lt();O(at,n),O(dt,e,dt),O(dt,n,y),O(y,e,dt),O(y,n,y),k(dt,ut,S),k(y,ut,S)}return k(s,Yt,v),k(s,jn,Ml),{start:s,tokens:as}}function Tl(t,e,n){let r=n.length,s=0,o=[],i=[];for(;s<r;){let a=t,l=null,c=null,u=0,d=null,p=-1;for(;s<r&&!(l=a.go(n[s].t));)i.push(n[s++]);for(;s<r&&(c=l||a.go(n[s].t));)l=null,a=c,a.accepts()?(p=0,d=a):p>=0&&p++,s++,u++;if(p<0)s-=u,s<r&&(i.push(n[s]),s++);else{i.length>0&&(o.push(hn(Sr,e,i)),i=[]),s-=p,u-=p;const f=d.t,b=n.slice(s-u,s);o.push(hn(f,e,b))}}return i.length>0&&o.push(hn(Sr,e,i)),o}function hn(t,e,n){const r=n[0].s,s=n[n.length-1].e,o=e.slice(r,s);return new t(o,n)}const wl=typeof console<"u"&&console&&console.warn||(()=>{}),Al="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",F={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Sl(){return rt.groups={},F.scanner=null,F.parser=null,F.tokenQueue=[],F.pluginQueue=[],F.customSchemes=[],F.initialized=!1,F}function xr(t,e=!1){if(F.initialized&&wl(`linkifyjs: already initialized - will not register custom scheme "${t}" ${Al}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);F.customSchemes.push([t,e])}function xl(){F.scanner=kl(F.customSchemes);for(let t=0;t<F.tokenQueue.length;t++)F.tokenQueue[t][1]({scanner:F.scanner});F.parser=vl(F.scanner.tokens);for(let t=0;t<F.pluginQueue.length;t++)F.pluginQueue[t][1]({scanner:F.scanner,parser:F.parser});return F.initialized=!0,F}function Gn(t){return F.initialized||xl(),Tl(F.parser.start,t,ls(F.scanner.start,t))}Gn.scan=ls;function us(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new Kn(n),s=Gn(t),o=[];for(let i=0;i<s.length;i++){const a=s[i];a.isLink&&(!e||a.t===e)&&r.check(a)&&o.push(a.toFormattedObject(r))}return o}const qn="[\0- Â áá â-\u2029âã]",Cl=new RegExp(qn),Ll=new RegExp(`${qn}$`),Ol=new RegExp(qn,"g");function Rl(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function Nl(t){return new X({key:new Z("autolink"),appendTransaction:(e,n,r)=>{const s=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),o=e.some(c=>c.getMeta("preventAutolink"));if(!s||o)return;const{tr:i}=r,a=Pi(n.doc,[...e]);if(Fi(a).forEach(({newRange:c})=>{const u=_i(r.doc,c,f=>f.isTextblock);let d,p;if(u.length>1)d=u[0],p=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(u.length){const f=r.doc.textBetween(c.from,c.to," "," ");if(!Ll.test(f))return;d=u[0],p=r.doc.textBetween(d.pos,c.to,void 0," ")}if(d&&p){const f=p.split(Cl).filter(Boolean);if(f.length<=0)return!1;const b=f[f.length-1],g=d.pos+p.lastIndexOf(b);if(!b)return!1;const h=Gn(b).map(m=>m.toObject(t.defaultProtocol));if(!Rl(h))return!1;h.filter(m=>m.isLink).map(m=>({...m,from:g+m.start+1,to:g+m.end+1})).filter(m=>r.schema.marks.code?!r.doc.rangeHasMark(m.from,m.to,r.schema.marks.code):!0).filter(m=>t.validate(m.value)).filter(m=>t.shouldAutoLink(m.value)).forEach(m=>{Bn(m.from,m.to,r.doc).some(v=>v.mark.type===t.type)||i.addMark(m.from,m.to,t.type.create({href:m.href}))})}}),!!i.steps.length)return i}})}function Il(t){return new X({key:new Z("handleClickLink"),props:{handleClick:(e,n,r)=>{var s,o;if(r.button!==0||!e.editable)return!1;let i=r.target;const a=[];for(;i.nodeName!=="DIV";)a.push(i),i=i.parentNode;if(!a.find(p=>p.nodeName==="A"))return!1;const l=Zr(e.state,t.type.name),c=r.target,u=(s=c?.href)!==null&&s!==void 0?s:l.href,d=(o=c?.target)!==null&&o!==void 0?o:l.target;return c&&u?(window.open(u,d),!0):!1}}})}function Pl(t){return new X({key:new Z("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:s}=e,{selection:o}=s,{empty:i}=o;if(i)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=us(a,{defaultProtocol:t.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:t.editor.commands.setMark(t.type,{href:l.href})}}})}function Lt(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!t||t.replace(Ol,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const tu=st.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate),this.options.protocols.forEach(t=>{if(typeof t=="string"){xr(t);return}xr(t.scheme,t.optionalSlashes)})},onDestroy(){Sl()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Lt(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Lt(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Lt(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",I(this.options.HTMLAttributes,t),0]:["a",I(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Lt(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Lt(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[St({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,s=us(t).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:i=>!!Lt(i,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(o=>e.push({text:o.value,data:{href:o.href},index:o.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(Nl({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!Lt(s,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(Il({type:this.type})),this.options.linkOnPaste&&t.push(Pl({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),eu=st.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(t){return t!=="super"?!1:null}}]},renderHTML({HTMLAttributes:t}){return["sup",I(this.options.HTMLAttributes,t),0]},addCommands(){return{setSuperscript:()=>({commands:t})=>t.setMark(this.name),toggleSuperscript:()=>({commands:t})=>t.toggleMark(this.name),unsetSuperscript:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}}),nu=st.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(t){return t!=="sub"?!1:null}}]},renderHTML({HTMLAttributes:t}){return["sub",I(this.options.HTMLAttributes,t),0]},addCommands(){return{setSubscript:()=>({commands:t})=>t.setMark(this.name),toggleSubscript:()=>({commands:t})=>t.toggleMark(this.name),unsetSubscript:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}}),ru=K.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",I(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}}),Hl=/^\s*(\[([( |x])?\])\s$/,su=K.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",I(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const s=document.createElement("li"),o=document.createElement("label"),i=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=()=>{var u,d;a.ariaLabel=((d=(u=this.options.a11y)===null||u===void 0?void 0:u.checkboxLabel)===null||d===void 0?void 0:d.call(u,t,a.checked))||`Task item checkbox for ${t.textContent||"empty task item"}`};return c(),o.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",u=>u.preventDefault()),a.addEventListener("change",u=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:d}=u.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const f=n();if(typeof f!="number")return!1;const b=p.doc.nodeAt(f);return p.setNodeMarkup(f,void 0,{...b?.attrs,checked:d}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,d)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([u,d])=>{s.setAttribute(u,d)}),s.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,o.append(a,i),s.append(o,l),Object.entries(e).forEach(([u,d])=>{s.setAttribute(u,d)}),{dom:s,contentDOM:l,update:u=>u.type!==this.type?!1:(s.dataset.checked=u.attrs.checked,a.checked=u.attrs.checked,c(),!0)}}},addInputRules(){return[jt({find:Hl,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}});function _l(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ds(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(e=>{const n=t[e],r=typeof n;(r==="object"||r==="function")&&!Object.isFrozen(n)&&ds(n)}),t}class Cr{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function ps(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function wt(t,...e){const n=Object.create(null);for(const r in t)n[r]=t[r];return e.forEach(function(r){for(const s in r)n[s]=r[s]}),n}const $l="</span>",Lr=t=>!!t.scope,Bl=(t,{prefix:e})=>{if(t.startsWith("language:"))return t.replace("language:","language-");if(t.includes(".")){const n=t.split(".");return[`${e}${n.shift()}`,...n.map((r,s)=>`${r}${"_".repeat(s+1)}`)].join(" ")}return`${e}${t}`};class Dl{constructor(e,n){this.buffer="",this.classPrefix=n.classPrefix,e.walk(this)}addText(e){this.buffer+=ps(e)}openNode(e){if(!Lr(e))return;const n=Bl(e.scope,{prefix:this.classPrefix});this.span(n)}closeNode(e){Lr(e)&&(this.buffer+=$l)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const Or=(t={})=>{const e={children:[]};return Object.assign(e,t),e};class Vn{constructor(){this.rootNode=Or(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const n=Or({scope:e});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,n){return typeof n=="string"?e.addText(n):n.children&&(e.openNode(n),n.children.forEach(r=>this._walk(e,r)),e.closeNode(n)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(n=>typeof n=="string")?e.children=[e.children.join("")]:e.children.forEach(n=>{Vn._collapse(n)}))}}class jl extends Vn{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,n){const r=e.root;n&&(r.scope=`language:${n}`),this.add(r)}toHTML(){return new Dl(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function te(t){return t?typeof t=="string"?t:t.source:null}function fs(t){return Ht("(?=",t,")")}function Fl(t){return Ht("(?:",t,")*")}function zl(t){return Ht("(?:",t,")?")}function Ht(...t){return t.map(n=>te(n)).join("")}function Ul(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function Jn(...t){return"("+(Ul(t).capture?"":"?:")+t.map(r=>te(r)).join("|")+")"}function hs(t){return new RegExp(t.toString()+"|").exec("").length-1}function Wl(t,e){const n=t&&t.exec(e);return n&&n.index===0}const Kl=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function Qn(t,{joinWith:e}){let n=0;return t.map(r=>{n+=1;const s=n;let o=te(r),i="";for(;o.length>0;){const a=Kl.exec(o);if(!a){i+=o;break}i+=o.substring(0,a.index),o=o.substring(a.index+a[0].length),a[0][0]==="\\"&&a[1]?i+="\\"+String(Number(a[1])+s):(i+=a[0],a[0]==="("&&n++)}return i}).map(r=>`(${r})`).join(e)}const Gl=/\b\B/,ms="[a-zA-Z]\\w*",Xn="[a-zA-Z_]\\w*",gs="\\b\\d+(\\.\\d+)?",bs="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",ys="\\b(0b[01]+)",ql="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",Vl=(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=Ht(e,/.*\b/,t.binary,/\b.*/)),wt({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(n,r)=>{n.index!==0&&r.ignoreMatch()}},t)},ee={begin:"\\\\[\\s\\S]",relevance:0},Jl={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[ee]},Ql={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[ee]},Xl={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},tn=function(t,e,n={}){const r=wt({scope:"comment",begin:t,end:e,contains:[]},n);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const s=Jn("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:Ht(/[ ]+/,"(",s,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},Yl=tn("//","$"),Zl=tn("/\\*","\\*/"),tc=tn("#","$"),ec={scope:"number",begin:gs,relevance:0},nc={scope:"number",begin:bs,relevance:0},rc={scope:"number",begin:ys,relevance:0},sc={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[ee,{begin:/\[/,end:/\]/,relevance:0,contains:[ee]}]},oc={scope:"title",begin:ms,relevance:0},ic={scope:"title",begin:Xn,relevance:0},ac={begin:"\\.\\s*"+Xn,relevance:0},lc=function(t){return Object.assign(t,{"on:begin":(e,n)=>{n.data._beginMatch=e[1]},"on:end":(e,n)=>{n.data._beginMatch!==e[1]&&n.ignoreMatch()}})};var fe=Object.freeze({__proto__:null,APOS_STRING_MODE:Jl,BACKSLASH_ESCAPE:ee,BINARY_NUMBER_MODE:rc,BINARY_NUMBER_RE:ys,COMMENT:tn,C_BLOCK_COMMENT_MODE:Zl,C_LINE_COMMENT_MODE:Yl,C_NUMBER_MODE:nc,C_NUMBER_RE:bs,END_SAME_AS_BEGIN:lc,HASH_COMMENT_MODE:tc,IDENT_RE:ms,MATCH_NOTHING_RE:Gl,METHOD_GUARD:ac,NUMBER_MODE:ec,NUMBER_RE:gs,PHRASAL_WORDS_MODE:Xl,QUOTE_STRING_MODE:Ql,REGEXP_MODE:sc,RE_STARTERS_RE:ql,SHEBANG:Vl,TITLE_MODE:oc,UNDERSCORE_IDENT_RE:Xn,UNDERSCORE_TITLE_MODE:ic});function cc(t,e){t.input[t.index-1]==="."&&e.ignoreMatch()}function uc(t,e){t.className!==void 0&&(t.scope=t.className,delete t.className)}function dc(t,e){e&&t.beginKeywords&&(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=cc,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function pc(t,e){Array.isArray(t.illegal)&&(t.illegal=Jn(...t.illegal))}function fc(t,e){if(t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function hc(t,e){t.relevance===void 0&&(t.relevance=1)}const mc=(t,e)=>{if(!t.beforeMatch)return;if(t.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},t);Object.keys(t).forEach(r=>{delete t[r]}),t.keywords=n.keywords,t.begin=Ht(n.beforeMatch,fs(n.begin)),t.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},t.relevance=0,delete n.beforeMatch},gc=["of","and","for","in","not","or","if","then","parent","list","value"],bc="keyword";function ks(t,e,n=bc){const r=Object.create(null);return typeof t=="string"?s(n,t.split(" ")):Array.isArray(t)?s(n,t):Object.keys(t).forEach(function(o){Object.assign(r,ks(t[o],e,o))}),r;function s(o,i){e&&(i=i.map(a=>a.toLowerCase())),i.forEach(function(a){const l=a.split("|");r[l[0]]=[o,yc(l[0],l[1])]})}}function yc(t,e){return e?Number(e):kc(t)?0:1}function kc(t){return gc.includes(t.toLowerCase())}const Rr={},It=t=>{},Nr=(t,...e)=>{},$t=(t,e)=>{Rr[`${t}/${e}`]||(Rr[`${t}/${e}`]=!0)},Ke=new Error;function Es(t,e,{key:n}){let r=0;const s=t[n],o={},i={};for(let a=1;a<=e.length;a++)i[a+r]=s[a],o[a+r]=!0,r+=hs(e[a-1]);t[n]=i,t[n]._emit=o,t[n]._multi=!0}function Ec(t){if(Array.isArray(t.begin)){if(t.skip||t.excludeBegin||t.returnBegin)throw It("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Ke;if(typeof t.beginScope!="object"||t.beginScope===null)throw It("beginScope must be object"),Ke;Es(t,t.begin,{key:"beginScope"}),t.begin=Qn(t.begin,{joinWith:""})}}function Mc(t){if(Array.isArray(t.end)){if(t.skip||t.excludeEnd||t.returnEnd)throw It("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Ke;if(typeof t.endScope!="object"||t.endScope===null)throw It("endScope must be object"),Ke;Es(t,t.end,{key:"endScope"}),t.end=Qn(t.end,{joinWith:""})}}function vc(t){t.scope&&typeof t.scope=="object"&&t.scope!==null&&(t.beginScope=t.scope,delete t.scope)}function Tc(t){vc(t),typeof t.beginScope=="string"&&(t.beginScope={_wrap:t.beginScope}),typeof t.endScope=="string"&&(t.endScope={_wrap:t.endScope}),Ec(t),Mc(t)}function wc(t){function e(i,a){return new RegExp(te(i),"m"+(t.case_insensitive?"i":"")+(t.unicodeRegex?"u":"")+(a?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(a,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,a]),this.matchAt+=hs(a)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const a=this.regexes.map(l=>l[1]);this.matcherRe=e(Qn(a,{joinWith:"|"}),!0),this.lastIndex=0}exec(a){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(a);if(!l)return null;const c=l.findIndex((d,p)=>p>0&&d!==void 0),u=this.matchIndexes[c];return l.splice(0,c),Object.assign(l,u)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(a){if(this.multiRegexes[a])return this.multiRegexes[a];const l=new n;return this.rules.slice(a).forEach(([c,u])=>l.addRule(c,u)),l.compile(),this.multiRegexes[a]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(a,l){this.rules.push([a,l]),l.type==="begin"&&this.count++}exec(a){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let c=l.exec(a);if(this.resumingScanAtSamePosition()&&!(c&&c.index===this.lastIndex)){const u=this.getMatcher(0);u.lastIndex=this.lastIndex+1,c=u.exec(a)}return c&&(this.regexIndex+=c.position+1,this.regexIndex===this.count&&this.considerAll()),c}}function s(i){const a=new r;return i.contains.forEach(l=>a.addRule(l.begin,{rule:l,type:"begin"})),i.terminatorEnd&&a.addRule(i.terminatorEnd,{type:"end"}),i.illegal&&a.addRule(i.illegal,{type:"illegal"}),a}function o(i,a){const l=i;if(i.isCompiled)return l;[uc,fc,Tc,mc].forEach(u=>u(i,a)),t.compilerExtensions.forEach(u=>u(i,a)),i.__beforeBegin=null,[dc,pc,hc].forEach(u=>u(i,a)),i.isCompiled=!0;let c=null;return typeof i.keywords=="object"&&i.keywords.$pattern&&(i.keywords=Object.assign({},i.keywords),c=i.keywords.$pattern,delete i.keywords.$pattern),c=c||/\w+/,i.keywords&&(i.keywords=ks(i.keywords,t.case_insensitive)),l.keywordPatternRe=e(c,!0),a&&(i.begin||(i.begin=/\B|\b/),l.beginRe=e(l.begin),!i.end&&!i.endsWithParent&&(i.end=/\B|\b/),i.end&&(l.endRe=e(l.end)),l.terminatorEnd=te(l.end)||"",i.endsWithParent&&a.terminatorEnd&&(l.terminatorEnd+=(i.end?"|":"")+a.terminatorEnd)),i.illegal&&(l.illegalRe=e(i.illegal)),i.contains||(i.contains=[]),i.contains=[].concat(...i.contains.map(function(u){return Ac(u==="self"?i:u)})),i.contains.forEach(function(u){o(u,l)}),i.starts&&o(i.starts,a),l.matcher=s(l),l}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=wt(t.classNameAliases||{}),o(t)}function Ms(t){return t?t.endsWithParent||Ms(t.starts):!1}function Ac(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(e){return wt(t,{variants:null},e)})),t.cachedVariants?t.cachedVariants:Ms(t)?wt(t,{starts:t.starts?wt(t.starts):null}):Object.isFrozen(t)?wt(t):t}var Sc="11.10.0";class xc extends Error{constructor(e,n){super(e),this.name="HTMLInjectionError",this.html=n}}const mn=ps,Ir=wt,Pr=Symbol("nomatch"),Cc=7,vs=function(t){const e=Object.create(null),n=Object.create(null),r=[];let s=!0;const o="Could not find the language '{}', did you forget to load/include a language module?",i={disableAutodetect:!0,name:"Plain text",contains:[]};let a={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:jl};function l(y){return a.noHighlightRe.test(y)}function c(y){let T=y.className+" ";T+=y.parentNode?y.parentNode.className:"";const L=a.languageDetectRe.exec(T);if(L){const H=U(L[1]);return H||(Nr(o.replace("{}",L[1])),Nr("Falling back to no-highlight mode for this block.",y)),H?L[1]:"no-highlight"}return T.split(/\s+/).find(H=>l(H)||U(H))}function u(y,T,L){let H="",D="";typeof T=="object"?(H=y,L=T.ignoreIllegals,D=T.language):($t("10.7.0","highlight(lang, code, ...args) has been deprecated."),$t("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),D=y,H=T),L===void 0&&(L=!0);const et={code:H,language:D};at("before:highlight",et);const nt=et.result?et.result:d(et.language,et.code,L);return nt.code=et.code,at("after:highlight",nt),nt}function d(y,T,L,H){const D=Object.create(null);function et(E,w){return E.keywords[w]}function nt(){if(!C.keywords){Q.addText(j);return}let E=0;C.keywordPatternRe.lastIndex=0;let w=C.keywordPatternRe.exec(j),N="";for(;w;){N+=j.substring(E,w.index);const _=ft.case_insensitive?w[0].toLowerCase():w[0],Y=et(C,_);if(Y){const[gt,Os]=Y;if(Q.addText(N),N="",D[_]=(D[_]||0)+1,D[_]<=Cc&&(se+=Os),gt.startsWith("_"))N+=w[0];else{const Rs=ft.classNameAliases[gt]||gt;pt(w[0],Rs)}}else N+=w[0];E=C.keywordPatternRe.lastIndex,w=C.keywordPatternRe.exec(j)}N+=j.substring(E),Q.addText(N)}function _t(){if(j==="")return;let E=null;if(typeof C.subLanguage=="string"){if(!e[C.subLanguage]){Q.addText(j);return}E=d(C.subLanguage,j,!0,nr[C.subLanguage]),nr[C.subLanguage]=E._top}else E=f(j,C.subLanguage.length?C.subLanguage:null);C.relevance>0&&(se+=E.relevance),Q.__addSublanguage(E._emitter,E.language)}function J(){C.subLanguage!=null?_t():nt(),j=""}function pt(E,w){E!==""&&(Q.startScope(w),Q.addText(E),Q.endScope())}function Yn(E,w){let N=1;const _=w.length-1;for(;N<=_;){if(!E._emit[N]){N++;continue}const Y=ft.classNameAliases[E[N]]||E[N],gt=w[N];Y?pt(gt,Y):(j=gt,nt(),j=""),N++}}function Zn(E,w){return E.scope&&typeof E.scope=="string"&&Q.openNode(ft.classNameAliases[E.scope]||E.scope),E.beginScope&&(E.beginScope._wrap?(pt(j,ft.classNameAliases[E.beginScope._wrap]||E.beginScope._wrap),j=""):E.beginScope._multi&&(Yn(E.beginScope,w),j="")),C=Object.create(E,{parent:{value:C}}),C}function tr(E,w,N){let _=Wl(E.endRe,N);if(_){if(E["on:end"]){const Y=new Cr(E);E["on:end"](w,Y),Y.isMatchIgnored&&(_=!1)}if(_){for(;E.endsParent&&E.parent;)E=E.parent;return E}}if(E.endsWithParent)return tr(E.parent,w,N)}function As(E){return C.matcher.regexIndex===0?(j+=E[0],1):(rn=!0,0)}function Ss(E){const w=E[0],N=E.rule,_=new Cr(N),Y=[N.__beforeBegin,N["on:begin"]];for(const gt of Y)if(gt&&(gt(E,_),_.isMatchIgnored))return As(w);return N.skip?j+=w:(N.excludeBegin&&(j+=w),J(),!N.returnBegin&&!N.excludeBegin&&(j=w)),Zn(N,E),N.returnBegin?0:w.length}function xs(E){const w=E[0],N=T.substring(E.index),_=tr(C,E,N);if(!_)return Pr;const Y=C;C.endScope&&C.endScope._wrap?(J(),pt(w,C.endScope._wrap)):C.endScope&&C.endScope._multi?(J(),Yn(C.endScope,E)):Y.skip?j+=w:(Y.returnEnd||Y.excludeEnd||(j+=w),J(),Y.excludeEnd&&(j=w));do C.scope&&Q.closeNode(),!C.skip&&!C.subLanguage&&(se+=C.relevance),C=C.parent;while(C!==_.parent);return _.starts&&Zn(_.starts,E),Y.returnEnd?0:w.length}function Cs(){const E=[];for(let w=C;w!==ft;w=w.parent)w.scope&&E.unshift(w.scope);E.forEach(w=>Q.openNode(w))}let re={};function er(E,w){const N=w&&w[0];if(j+=E,N==null)return J(),0;if(re.type==="begin"&&w.type==="end"&&re.index===w.index&&N===""){if(j+=T.slice(w.index,w.index+1),!s){const _=new Error(`0 width match regex (${y})`);throw _.languageName=y,_.badRule=re.rule,_}return 1}if(re=w,w.type==="begin")return Ss(w);if(w.type==="illegal"&&!L){const _=new Error('Illegal lexeme "'+N+'" for mode "'+(C.scope||"<unnamed>")+'"');throw _.mode=C,_}else if(w.type==="end"){const _=xs(w);if(_!==Pr)return _}if(w.type==="illegal"&&N==="")return 1;if(nn>1e5&&nn>w.index*3)throw new Error("potential infinite loop, way more iterations than matches");return j+=N,N.length}const ft=U(y);if(!ft)throw It(o.replace("{}",y)),new Error('Unknown language: "'+y+'"');const Ls=wc(ft);let en="",C=H||Ls;const nr={},Q=new a.__emitter(a);Cs();let j="",se=0,Ct=0,nn=0,rn=!1;try{if(ft.__emitTokens)ft.__emitTokens(T,Q);else{for(C.matcher.considerAll();;){nn++,rn?rn=!1:C.matcher.considerAll(),C.matcher.lastIndex=Ct;const E=C.matcher.exec(T);if(!E)break;const w=T.substring(Ct,E.index),N=er(w,E);Ct=E.index+N}er(T.substring(Ct))}return Q.finalize(),en=Q.toHTML(),{language:y,value:en,relevance:se,illegal:!1,_emitter:Q,_top:C}}catch(E){if(E.message&&E.message.includes("Illegal"))return{language:y,value:mn(T),illegal:!0,relevance:0,_illegalBy:{message:E.message,index:Ct,context:T.slice(Ct-100,Ct+100),mode:E.mode,resultSoFar:en},_emitter:Q};if(s)return{language:y,value:mn(T),illegal:!1,relevance:0,errorRaised:E,_emitter:Q,_top:C};throw E}}function p(y){const T={value:mn(y),illegal:!1,relevance:0,_top:i,_emitter:new a.__emitter(a)};return T._emitter.addText(y),T}function f(y,T){T=T||a.languages||Object.keys(e);const L=p(y),H=T.filter(U).filter(it).map(J=>d(J,y,!1));H.unshift(L);const D=H.sort((J,pt)=>{if(J.relevance!==pt.relevance)return pt.relevance-J.relevance;if(J.language&&pt.language){if(U(J.language).supersetOf===pt.language)return 1;if(U(pt.language).supersetOf===J.language)return-1}return 0}),[et,nt]=D,_t=et;return _t.secondBest=nt,_t}function b(y,T,L){const H=T&&n[T]||L;y.classList.add("hljs"),y.classList.add(`language-${H}`)}function g(y){let T=null;const L=c(y);if(l(L)||(at("before:highlightElement",{el:y,language:L}),y.dataset.highlighted))return;if(y.children.length>0&&(a.ignoreUnescapedHTML,a.throwUnescapedHTML))throw new xc("One of your code blocks includes unescaped HTML.",y.innerHTML);T=y;const H=T.textContent,D=L?u(H,{language:L,ignoreIllegals:!0}):f(H);y.innerHTML=D.value,y.dataset.highlighted="yes",b(y,L,D.language),y.result={language:D.language,re:D.relevance,relevance:D.relevance},D.secondBest&&(y.secondBest={language:D.secondBest.language,relevance:D.secondBest.relevance}),at("after:highlightElement",{el:y,result:D,text:H})}function h(y){a=Ir(a,y)}const m=()=>{x(),$t("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function v(){x(),$t("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let A=!1;function x(){if(document.readyState==="loading"){A=!0;return}document.querySelectorAll(a.cssSelector).forEach(g)}function S(){A&&x()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",S,!1);function P(y,T){let L=null;try{L=T(t)}catch(H){if(It("Language definition for '{}' could not be registered.".replace("{}",y)),s)It(H);else throw H;L=i}L.name||(L.name=y),e[y]=L,L.rawDefinition=T.bind(null,t),L.aliases&&ot(L.aliases,{languageName:y})}function $(y){delete e[y];for(const T of Object.keys(n))n[T]===y&&delete n[T]}function z(){return Object.keys(e)}function U(y){return y=(y||"").toLowerCase(),e[y]||e[n[y]]}function ot(y,{languageName:T}){typeof y=="string"&&(y=[y]),y.forEach(L=>{n[L.toLowerCase()]=T})}function it(y){const T=U(y);return T&&!T.disableAutodetect}function B(y){y["before:highlightBlock"]&&!y["before:highlightElement"]&&(y["before:highlightElement"]=T=>{y["before:highlightBlock"](Object.assign({block:T.el},T))}),y["after:highlightBlock"]&&!y["after:highlightElement"]&&(y["after:highlightElement"]=T=>{y["after:highlightBlock"](Object.assign({block:T.el},T))})}function V(y){B(y),r.push(y)}function ut(y){const T=r.indexOf(y);T!==-1&&r.splice(T,1)}function at(y,T){const L=y;r.forEach(function(H){H[L]&&H[L](T)})}function dt(y){return $t("10.7.0","highlightBlock will be removed entirely in v12.0"),$t("10.7.0","Please use highlightElement now."),g(y)}Object.assign(t,{highlight:u,highlightAuto:f,highlightAll:x,highlightElement:g,highlightBlock:dt,configure:h,initHighlighting:m,initHighlightingOnLoad:v,registerLanguage:P,unregisterLanguage:$,listLanguages:z,getLanguage:U,registerAliases:ot,autoDetection:it,inherit:Ir,addPlugin:V,removePlugin:ut}),t.debugMode=function(){s=!1},t.safeMode=function(){s=!0},t.versionString=Sc,t.regex={concat:Ht,lookahead:fs,either:Jn,optional:zl,anyNumberOfTimes:Fl};for(const y in fe)typeof fe[y]=="object"&&ds(fe[y]);return Object.assign(t,fe),t},Ft=vs({});Ft.newInstance=()=>vs({});var Lc=Ft;Ft.HighlightJS=Ft;Ft.default=Ft;var Oc=_l(Lc);function Ts(t,e=[]){return t.map(n=>{const r=[...e,...n.properties?n.properties.className:[]];return n.children?Ts(n.children,r):{text:n.value,classes:r}}).flat()}function Hr(t){return t.value||t.children||[]}function Rc(t){return!!Oc.getLanguage(t)}function _r({doc:t,name:e,lowlight:n,defaultLanguage:r}){const s=[];return yn(t,o=>o.type.name===e).forEach(o=>{var i;let a=o.pos+1;const l=o.node.attrs.language||r,c=n.listLanguages(),u=l&&(c.includes(l)||Rc(l)||!((i=n.registered)===null||i===void 0)&&i.call(n,l))?Hr(n.highlight(l,o.node.textContent)):Hr(n.highlightAuto(o.node.textContent));Ts(u).forEach(d=>{const p=a+d.text.length;if(d.classes.length){const f=Rn.inline(a,p,{class:d.classes.join(" ")});s.push(f)}a=p})}),Nn.create(t,s)}function Nc(t){return typeof t=="function"}function Ic({name:t,lowlight:e,defaultLanguage:n}){if(!["highlight","highlightAuto","listLanguages"].every(s=>Nc(e[s])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new X({key:new Z("lowlight"),state:{init:(s,{doc:o})=>_r({doc:o,name:t,lowlight:e,defaultLanguage:n}),apply:(s,o,i,a)=>{const l=i.selection.$head.parent.type.name,c=a.selection.$head.parent.type.name,u=yn(i.doc,p=>p.type.name===t),d=yn(a.doc,p=>p.type.name===t);return s.docChanged&&([l,c].includes(t)||d.length!==u.length||s.steps.some(p=>p.from!==void 0&&p.to!==void 0&&u.some(f=>f.pos>=p.from&&f.pos+f.node.nodeSize<=p.to)))?_r({doc:s.doc,name:t,lowlight:e,defaultLanguage:n}):o.map(s.mapping,s.doc)}},props:{decorations(s){return r.getState(s)}}});return r}const ou=es.extend({addOptions(){var t;return{...(t=this.parent)===null||t===void 0?void 0:t.call(this),lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},addProseMirrorPlugins(){var t;return[...((t=this.parent)===null||t===void 0?void 0:t.call(this))||[],Ic({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}}),iu=G.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something â¦",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new X({key:new Z("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,s=[];if(!n)return null;const o=this.editor.isEmpty;return t.descendants((i,a)=>{const l=r>=a&&r<=a+i.nodeSize,c=!i.isLeaf&&Ye(i);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];o&&u.push(this.options.emptyEditorClass);const d=Rn.node(a,a+i.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:i,pos:a,hasAnchor:l}):this.options.placeholder});s.push(d)}return this.options.includeChildren}),Nn.create(t,s)}}})]}});function Pc(t){var e;const{char:n,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:o,startOfLine:i,$position:a}=t,l=r&&!s,c=Ma(n),u=new RegExp(`\\s${c}$`),d=i?"^":"",p=s?"":c,f=l?new RegExp(`${d}${c}.*?(?=\\s${p}|$)`,"gm"):new RegExp(`${d}(?:^)?${c}[^\\s${p}]*`,"gm"),b=((e=a.nodeBefore)===null||e===void 0?void 0:e.isText)&&a.nodeBefore.text;if(!b)return null;const g=a.pos-b.length,h=Array.from(b.matchAll(f)).pop();if(!h||h.input===void 0||h.index===void 0)return null;const m=h.input.slice(Math.max(0,h.index-1),h.index),v=new RegExp(`^[${o?.join("")}\0]?$`).test(m);if(o!==null&&!v)return null;const A=g+h.index;let x=A+h[0].length;return l&&u.test(b.slice(x-1,x+1))&&(h[0]+=" ",x+=1),A<a.pos&&x>=a.pos?{range:{from:A,to:x},query:h[0].slice(n.length),text:h[0]}:null}const Hc=new Z("suggestion");function _c({pluginKey:t=Hc,editor:e,char:n="@",allowSpaces:r=!1,allowToIncludeChar:s=!1,allowedPrefixes:o=[" "],startOfLine:i=!1,decorationTag:a="span",decorationClass:l="suggestion",decorationContent:c="",decorationEmptyClass:u="is-empty",command:d=()=>null,items:p=()=>[],render:f=()=>({}),allow:b=()=>!0,findSuggestionMatch:g=Pc}){let h;const m=f?.(),v=new X({key:t,view(){return{update:async(A,x)=>{var S,P,$,z,U,ot,it;const B=(S=this.key)===null||S===void 0?void 0:S.getState(x),V=(P=this.key)===null||P===void 0?void 0:P.getState(A.state),ut=B.active&&V.active&&B.range.from!==V.range.from,at=!B.active&&V.active,dt=B.active&&!V.active,y=!at&&!dt&&B.query!==V.query,T=at||ut&&y,L=y||ut,H=dt||ut&&y;if(!T&&!L&&!H)return;const D=H&&!T?B:V,et=A.dom.querySelector(`[data-decoration-id="${D.decorationId}"]`);h={editor:e,range:D.range,query:D.query,text:D.text,items:[],command:nt=>d({editor:e,range:D.range,props:nt}),decorationNode:et,clientRect:et?()=>{var nt;const{decorationId:_t}=(nt=this.key)===null||nt===void 0?void 0:nt.getState(e.state),J=A.dom.querySelector(`[data-decoration-id="${_t}"]`);return J?.getBoundingClientRect()||null}:null},T&&(($=m?.onBeforeStart)===null||$===void 0||$.call(m,h)),L&&((z=m?.onBeforeUpdate)===null||z===void 0||z.call(m,h)),(L||T)&&(h.items=await p({editor:e,query:D.query})),H&&((U=m?.onExit)===null||U===void 0||U.call(m,h)),L&&((ot=m?.onUpdate)===null||ot===void 0||ot.call(m,h)),T&&((it=m?.onStart)===null||it===void 0||it.call(m,h))},destroy:()=>{var A;h&&((A=m?.onExit)===null||A===void 0||A.call(m,h))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(A,x,S,P){const{isEditable:$}=e,{composing:z}=e.view,{selection:U}=A,{empty:ot,from:it}=U,B={...x};if(B.composing=z,$&&(ot||e.view.composing)){(it<x.range.from||it>x.range.to)&&!z&&!x.composing&&(B.active=!1);const V=g({char:n,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:o,startOfLine:i,$position:U.$from}),ut=`id_${Math.floor(Math.random()*4294967295)}`;V&&b({editor:e,state:P,range:V.range,isActive:x.active})?(B.active=!0,B.decorationId=x.decorationId?x.decorationId:ut,B.range=V.range,B.query=V.query,B.text=V.text):B.active=!1}else B.active=!1;return B.active||(B.decorationId=null,B.range={from:0,to:0},B.query=null,B.text=null),B}},props:{handleKeyDown(A,x){var S;const{active:P,range:$}=v.getState(A.state);return P&&((S=m?.onKeyDown)===null||S===void 0?void 0:S.call(m,{view:A,event:x,range:$}))||!1},decorations(A){const{active:x,range:S,decorationId:P,query:$}=v.getState(A);if(!x)return null;const z=!$?.length,U=[l];return z&&U.push(u),Nn.create(A.doc,[Rn.inline(S.from,S.to,{nodeName:a,class:U.join(" "),"data-decoration-id":P,"data-decoration-content":c})])}}});return v}function $c({editor:t,overrideSuggestionOptions:e,extensionName:n,char:r="@"}){const s=new Z;return{editor:t,char:r,pluginKey:s,command:({editor:o,range:i,props:a})=>{var l,c,u;const d=o.view.state.selection.$to.nodeAfter;((l=d?.text)===null||l===void 0?void 0:l.startsWith(" "))&&(i.to+=1),o.chain().focus().insertContentAt(i,[{type:n,attrs:{...a,mentionSuggestionChar:r}},{type:"text",text:" "}]).run(),(u=(c=o.view.dom.ownerDocument.defaultView)===null||c===void 0?void 0:c.getSelection())===null||u===void 0||u.collapseToEnd()},allow:({state:o,range:i})=>{const a=o.doc.resolve(i.from),l=o.schema.nodes[n];return!!a.parent.type.contentMatch.matchType(l)},...e}}function ws(t){return(t.options.suggestions.length?t.options.suggestions:[t.options.suggestion]).map(e=>$c({editor:t.editor,overrideSuggestionOptions:e,extensionName:t.name,char:e.char}))}function $r(t,e){const n=ws(t),r=n.find(s=>s.char===e);return r||(n.length?n[0]:null)}const au=K.create({name:"mention",priority:101,addOptions(){return{HTMLAttributes:{},renderText({node:t,suggestion:e}){var n,r;return`${(n=e?.char)!==null&&n!==void 0?n:"@"}${(r=t.attrs.label)!==null&&r!==void 0?r:t.attrs.id}`},deleteTriggerWithBackspace:!1,renderHTML({options:t,node:e,suggestion:n}){var r,s;return["span",I(this.HTMLAttributes,t.HTMLAttributes),`${(r=n?.char)!==null&&r!==void 0?r:"@"}${(s=e.attrs.label)!==null&&s!==void 0?s:e.attrs.id}`]},suggestions:[],suggestion:{}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{id:{default:null,parseHTML:t=>t.getAttribute("data-id"),renderHTML:t=>t.id?{"data-id":t.id}:{}},label:{default:null,parseHTML:t=>t.getAttribute("data-label"),renderHTML:t=>t.label?{"data-label":t.label}:{}},mentionSuggestionChar:{default:"@",parseHTML:t=>t.getAttribute("data-mention-suggestion-char"),renderHTML:t=>({"data-mention-suggestion-char":t.mentionSuggestionChar})}}},parseHTML(){return[{tag:`span[data-type="${this.name}"]`}]},renderHTML({node:t,HTMLAttributes:e}){const n=$r(this,t.attrs.mentionSuggestionChar);if(this.options.renderLabel!==void 0)return["span",I({"data-type":this.name},this.options.HTMLAttributes,e),this.options.renderLabel({options:this.options,node:t,suggestion:n})];const r={...this.options};r.HTMLAttributes=I({"data-type":this.name},this.options.HTMLAttributes,e);const s=this.options.renderHTML({options:r,node:t,suggestion:n});return typeof s=="string"?["span",I({"data-type":this.name},this.options.HTMLAttributes,e),s]:s},renderText({node:t}){const e={options:this.options,node:t,suggestion:$r(this,t.attrs.mentionSuggestionChar)};return this.options.renderLabel!==void 0?this.options.renderLabel(e):this.options.renderText(e)},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:t,state:e})=>{let n=!1;const{selection:r}=e,{empty:s,anchor:o}=r;if(!s)return!1;e.doc.nodesBetween(o-1,o,(l,c)=>{if(l.type.name===this.name)return n=!0,t.insertText(this.options.deleteTriggerWithBackspace?"":this.options.suggestion.char||"",c,c+l.nodeSize),!1});let i=new Dr,a=0;return e.doc.nodesBetween(o-1,o,(l,c)=>{if(l.type.name===this.name)return n=!0,i=l,a=c,!1}),n&&t.insertText(this.options.deleteTriggerWithBackspace?"":i.attrs.mentionSuggestionChar,a,a+i.nodeSize),n})}},addProseMirrorPlugins(){return ws(this).map(_c)}});export{jc as A,ou as C,G as E,Wc as F,ja as H,Vc as I,tu as L,au as M,K as N,iu as P,_c as S,Xc as T,zc as U,Yc as a,Je as b,R as c,qr as d,Ui as e,$n as f,xt as g,Wr as h,Xt as i,Fc as j,Uc as k,Kc as l,I as m,ts as n,be as o,Dc as p,Gc as q,qc as r,Jc as s,Qc as t,Zc as u,eu as v,jt as w,nu as x,ru as y,su as z};
